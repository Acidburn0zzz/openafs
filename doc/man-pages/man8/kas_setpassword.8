.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH kas_setpassword 8 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
kas setpassword \- Changes the key field in an Authentication Database entry
.SH "SYNOPSIS"
\fBkas setpassword\fR <<\ \fB\-name\fR\ <\fIname\ of\ user\fR >>>
    <<\ [\fB\-new_password\fR\ <\fInew\ password\fR] >>> <<\ [\fB\-kvno\fR\ <\fIkey\ version\ number\fR] >>>
    <<\ [\fB\-admin_username\fR\ <\fIadmin\ principal\ to\ use\ for\ authentication\fR] >>>
    <<\ [\fB\-password_for_admin\fR\ <\fIadmin\ password\fR] >>> <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-servers\fR\ <\fIexplicit\ list\ of\ authentication\ servers\fR+] >>>
    [\fB\-noauth\fR] [\fB\-help\fR]
.PP
\fBkas setpasswd\fR <<\ \fB\-na\fR\ <\fIname\ of\ user\fR >>> <<\ [\fB\-ne\fR\ <\fInew\ password\fR] >>>
    <<\ [\fB\-k\fR\ <\fIkey\ version\ number\fR] >>>
    <<\ [\fB\-a\fR\ <\fIadmin\ principal\ to\ use\ for\ authentication\fR] >>>
    <<\ [\fB\-p\fR\ <\fIadmin\ password\fR] >>> <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-s\fR\ <\fIexplicit\ list\ of\ authentication\ servers\fR+] >>> [\fB\-no\fR] [\fB\-h\fR]
.PP
\fBkas setp\fR <<\ \fB\-na\fR\ <\fIname\ of\ user\fR >>> <<\ [\fB\-ne\fR\ <\fInew\ password\fR] >>>
    <<\ [\fB\-k\fR\ <\fIkey\ version\ number\fR] >>>
    <<\ [\fB\-a\fR\ <\fIadmin\ principal\ to\ use\ for\ authentication\fR] >>>
    <<\ [\fB\-p\fR\ <\fIadmin\ password\fR] >>> <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-s\fR\ <\fIexplicit\ list\ of\ authentication\ servers\fR+] >>> [\fB\-no\fR] [\fB\-h\fR]
.PP
\fBkas sp\fR <<\ \fB\-na\fR\ <\fIname\ of\ user\fR >>> <<\ [\fB\-ne\fR\ <\fInew\ password\fR] >>>
    <<\ [\fB\-k\fR\ <\fIkey\ version\ number\fR] >>>
    <<\ [\fB\-a\fR\ <\fIadmin\ principal\ to\ use\ for\ authentication\fR] >>>
    <<\ [\fB\-p\fR\ <\fIadmin\ password\fR] >>> <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-s\fR\ <\fIexplicit\ list\ of\ authentication\ servers\fR+] >>> [\fB\-no\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBkas setpassword\fR command accepts a character string of unlimited
length, scrambles it into a form suitable for use as an encryption key,
places it in the key field of the Authentication Database entry named by
the \fB\-name\fR argument, and assigns it the key version number specified by
the \fB\-kvno\fR argument.
.PP
To avoid making the password string visible at the shell prompt, omit the
\fB\-new_password\fR argument. Prompts then appear at the shell which do not
echo the password visibly.
.PP
When changing the \fBafs\fR server key, also issue \fBbos addkey\fR command to
add the key (with the same key version number) to the
\fI/usr/afs/etc/KeyFile\fR file. See the \fIIBM AFS Administration Guide\fR for
instructions.
.PP
The command interpreter checks the password string subject to the
following conditions:
.Ip "\(bu" 4
If there is a program called kpwvalid in the same directory as the \fBkas\fR
binary, the command interpreter invokes it to process the password. For
details, see the \fIkpwvalid(8)\fR manpage.
.Ip "\(bu" 4
If the \fB\-reuse\fR argument to the \fBkas setfields\fR command has been used to
prohibit reuse of previous passwords, the command interpreter verifies
that the password is not too similar too any of the user's previous 20
passwords. It generates the following error message at the shell:
.Sp
.Vb 1
\&   Password was not changed because it seems like a reused password
.Ve
To prevent a user from subverting this restriction by changing the
password twenty times in quick succession (manually or by running a
script), use the \fB\-minhours\fR argument on the \fBkaserver\fR initialization
command. The following error message appears if a user attempts to change
a password before the minimum time has passed:
.Sp
.Vb 2
\&   Password was not changed because you changed it too
\&   recently; see your systems administrator
.Ve
.SH "OPTIONS"
.Ip "\fB\-name\fR <\fIname of user\fR>" 4
Names the entry in which to record the new key.
.Ip "\fB\-new_password\fR <\fInew password\fR>" 4
Specifies the character string the user types when authenticating to
\s-1AFS\s0. Omit this argument and type the string at the resulting prompts so
that the password does not echo visibly. Note that some non-\s-1AFS\s0 programs
cannot handle passwords longer than eight characters.
.Ip "\fB\-kvno\fR <\fIkey version number\fR>" 4
Specifies the key version number associated with the new key.  Provide an
integer in the range from \f(CW0\fR through \f(CW255\fR. If omitted, the default is
\f(CW0\fR (zero), which is probably not desirable for server keys.
.Ip "\fB\-admin_username\fR <\fIadmin principal\fR>" 4
Specifies the user identity under which to authenticate with the
Authentication Server for execution of the command. For more details, see
the \fIkas(8)\fR manpage.
.Ip "\fB\-password_for_admin\fR <\fIadmin password\fR>" 4
Specifies the password of the command's issuer. If it is omitted (as
recommended), the \fBkas\fR command interpreter prompts for it and does not
echo it visibly. For more details, see the \fIkas(8)\fR manpage.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. For more details, see
the \fIkas(8)\fR manpage.
.Ip "\fB\-servers\fR <\fIauthentication servers\fR>+" 4
Names each machine running an Authentication Server with which to
establish a connection. For more details, see the \fIkas(8)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity \f(CWanonymous\fR to the issuer. For more
details, see the \fIkas(8)\fR manpage.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
In the following example, an administrator using the \f(CWadmin\fR account
changes the password for \f(CWpat\fR (presumably because \f(CWpat\fR forgot the
former password or got locked out of his account in some other way).
.PP
.Vb 4
\&   % kas setpassword pat
\&   Password for admin:
\&   new_password:
\&   Verifying, please re-enter new_password:
.Ve
.SH "PRIVILEGE REQUIRED"
Individual users can change their own passwords. To change another user's
password or the password (server encryption key) for server entries such
as \f(CWafs\fR, the issuer must have the \f(CWADMIN\fR flag set in his or her
Authentication Database entry.
.SH "SEE ALSO"
the \fIbos_addkey(8)\fR manpage,
the \fIkas(8)\fR manpage,
the \fIkaserver(8)\fR manpage,
the \fIkpwvalid(8)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "kas_setpassword 8"
.IX Name "kas setpassword - Changes the key field in an Authentication Database entry"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-name\fR <\fIname of user\fR>"

.IX Item "\fB\-new_password\fR <\fInew password\fR>"

.IX Item "\fB\-kvno\fR <\fIkey version number\fR>"

.IX Item "\fB\-admin_username\fR <\fIadmin principal\fR>"

.IX Item "\fB\-password_for_admin\fR <\fIadmin password\fR>"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\fB\-servers\fR <\fIauthentication servers\fR>+"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-help\fR"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

