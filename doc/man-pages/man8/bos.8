.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH bos 8 "OpenAFS" "13/Dec/2005" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
bos \- Introduction to the bos command suite
.SH "DESCRIPTION"
The commands in the \fBbos\fR command suite are the administrative interface
to the Basic OverSeer (BOS) Server, which runs on every file server
machine to monitor the other server processes on it. If a process fails,
the BOS Server can restart it automatically, taking into account
interdependencies between it and other processes. The BOS Server frees
system administrators from constantly monitoring the status of server
machines and processes.
.PP
There are several categories of commands in the \fBbos\fR command suite:
.Ip "\(bu" 4
Commands to administer server process binary files: \fBbos getdate\fR, \fBbos
install\fR, \fBbos prune\fR, and \fBbos uninstall\fR.
.Ip "\(bu" 4
Commands to maintain system configuration files: \fBbos addhost\fR, \fBbos
addkey\fR, \fBbos adduser\fR, \fBbos listhosts\fR, \fBbos listkeys\fR, \fBbos
listusers\fR, \fBbos removehost\fR, \fBbos removekey\fR, \fBbos removeuser\fR, and
\fBbos setcellname\fR.
.Ip "\(bu" 4
Commands to start and stop processes: \fBbos create\fR, \fBbos delete\fR, \fBbos
restart\fR, \fBbos shutdown\fR, \fBbos start\fR, \fBbos startup\fR, and \fBbos stop\fR.
.Ip "\(bu" 4
Commands to set and verify server process and server machine status: \fBbos
getlog\fR, \fBbos getrestart\fR, \fBbos setauth\fR, \fBbos setrestart\fR, and \fBbos
status\fR.
.Ip "\(bu" 4
A command to restore file system consistency: \fBbos salvage\fR.
.Ip "\(bu" 4
Commands to obtain help: \fBbos apropos\fR and \fBbos help\fR.
.PP
The \s-1BOS\s0 Server and the \fBbos\fR commands use and maintain the following
configuration and log files:
.Ip "\(bu" 4
The \fI/usr/afs/etc/CellServDB\fR file lists the local cell's database server
machines. These machines run the Authentication, Backup, Protection and
Volume Location (\s-1VL\s0) Server processes, which maintain databases of
administrative information. The database server processes consult the file
to learn about their peers, whereas the other server processes consult it
to learn where to access database information as needed. To administer the
\fICellServDB\fR file, use the following commands: \fBbos addhost\fR, \fBbos
listhosts\fR, \fBbos removehost\fR, and \fBbos setcellname\fR.
.Ip "\(bu" 4
The \fI/usr/afs/etc/KeyFile\fR file lists the server encryption keys that the
server processes use to decrypt tickets presented by client processes and
one another. To administer the \fIKeyFile\fR file, use the following
commands: \fBbos addkey\fR, \fBbos listkeys\fR, and \fBbos removekey\fR.
.Ip "\(bu" 4
The \fI/usr/afs/etc/ThisCell\fR file defines the cell to which the server
machine belongs for the purposes of server-to-server communication.
Administer it with the \fBbos setcellname\fR command. There is also a
\fI/usr/vice/etc/ThisCell\fR file that defines the machine's cell membership
with respect to the \s-1AFS\s0 command suites and Cache Manager access to \s-1AFS\s0
data.
.Ip "\(bu" 4
The \fI/usr/afs/etc/UserList\fR file lists the user name of each
administrator authorized to issue privileged \fBbos\fR and \fBvos\fR
commands. To administer the \fIUserList\fR file, use the following commands:
\fBbos adduser\fR, \fBbos listusers\fR, and \fBbos removeuser\fR.
.Ip "\(bu" 4
The \fI/usr/afs/local/BosConfig\fR file defines which \s-1AFS\s0 server processes
run on the server machine, and whether the \s-1BOS\s0 Server restarts them
automatically if they fail. It also defines when all processes restart
automatically (by default once per week), and when the \s-1BOS\s0 Server restarts
processes that have new binary files (by default once per day). To
administer the \fIBosConfig\fR file, use the following commands: \fBbos
create\fR, \fBbos delete\fR, \fBbos getrestart\fR, \fBbos setrestart\fR, \fBbos
start\fR, and \fBbos stop\fR.
.Ip "\(bu" 4
The \fI/usr/afs/log/BosLog\fR file records important operations the \s-1BOS\s0
Server performs and error conditions it encounters.
.PP
For more details, see the reference page for each file.
.SH "OPTIONS"
The following arguments and flags are available on many commands in the
\fBbos\fR suite. The reference page for each command also lists them, but
they are described here in greater detail.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. It is acceptable to abbreviate
the cell name to the shortest form that distinguishes it from the other
entries in the \fI/usr/vice/etc/CellServDB\fR file on the local machine. If
the \fB\-cell\fR argument is omitted, the command interpreter determines the
name of the local cell by reading the following in order:
.Ip "\(bu" 8
The value of the \s-1AFSCELL\s0 environment variable.
.Ip "\(bu" 8
The local \fI/usr/vice/etc/ThisCell\fR file.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell.
.Ip "\fB\-help\fR" 4
Prints a command's online help message on the standard output stream. Do
not combine this flag with any of the command's other options; when it is
provided, the command interpreter ignores all other options, and only
prints the help message.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using the server encryption key with the
highest key version number in the local \fI/usr/afs/etc/KeyFile\fR file. The
\fBbos\fR command interpreter presents the ticket, which never expires, to
the \s-1BOS\s0 Server during mutual authentication.
.Sp
Use this flag only when issuing a command on a server machine; client
machines do not usually have a \fI/usr/afs/etc/KeyFile\fR file.  The issuer
of a command that includes this flag must be logged on to the server
machine as the local superuser \f(CWroot\fR. The flag is useful for commands
invoked by an unattended application program, such as a process controlled
by the \s-1UNIX\s0 \fBcron\fR utility or by a cron entry in the machine's
\fI/usr/afs/local/BosConfig\fR file. It is also useful if an administrator is
unable to authenticate to \s-1AFS\s0 but is logged in as the local superuser
\f(CWroot\fR.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell. Also, do not combine the \fB\-localauth\fR and
\fB\-noauth\fR flags.
.Ip "\fB\-noauth\fR" 4
Establishes an unauthenticated connection to the \s-1BOS\s0 Server, in which the
\s-1BOS\s0 Server treats the issuer as the unprivileged user \f(CWanonymous\fR. It is
useful only when authorization checking is disabled on the server machine
(during the installation of a file server machine or when the \fBbos
setauth\fR command has been used during other unusual circumstances). In
normal circumstances, the \s-1BOS\s0 Server allows only privileged users to issue
commands that change the status of a server or configuration file, and
refuses to perform such an action even if the \fB\-noauth\fR flag is
provided. Do not combine the \fB\-noauth\fR and \fB\-localauth\fR flags.
.Ip "\fB\-server\fR <\fImachine name\fR>" 4
Indicates the \s-1AFS\s0 server machine on which to run the command.  Identify
the machine by its \s-1IP\s0 address in dotted decimal format, its
fully-qualified host name (for example, \f(CWfs1.abc.com\fR), or by an
abbreviated form of its host name that distinguishes it from other
machines. Successful use of an abbreviated form depends on the
availability of a name service (such as the Domain Name Service or a local
host table) at the time the command is issued.
.Sp
For the commands that alter the administrative files shared by all server
machines in the cell (the \fBbos addhost\fR, \fBbos addkey\fR, \fBbos adduser\fR,
\fBbos removehost\fR, \fBbos removekey\fR, and \fBbos removeuser\fR commands), the
appropriate machine depends on whether the cell uses the United States or
international version of \s-1AFS\s0:
.Ip "\(bu" 8
If the cell (as recommended) uses the Update Server to distribute the
contents of the \fI/usr/afs/etc\fR directory, provide the name of the system
control machine. After issuing the command, allow up to five minutes for
the Update Server to distribute the changed file to the other \s-1AFS\s0 server
machines in the cell. If the specified machine is not the system control
machine but is running an \fBupclient\fR process that refers to the system
control machine, then the change will be overwritten when the process next
brings over the relevant file from the system control machine.
.Ip "\(bu" 8
Otherwise, repeatedly issue the command, naming each of the cell's server
machines in turn. To avoid possible inconsistency problems, finish issuing
the commands within a fairly short time.
.SH "PRIVILEGE REQUIRED"
To issue any bos command that changes a configuration file or alters
process status, the issuer must be listed in the \fI/usr/afs/etc/UserList\fR
file on the server machine named by the \fB\-server\fR
argument. Alternatively, if the \fB\-localauth\fR flag is included the issuer
must be logged on as the local superuser \f(CWroot\fR.
.PP
To issue a bos command that only displays information (other than the
\fBbos listkeys\fR command), no privilege is required.
.SH "SEE ALSO"
the \fIBosConfig(5)\fR manpage,
the \fICellServDB(5)\fR manpage,
the \fIKeyFile(5)\fR manpage,
the \fIThisCell(5)\fR manpage,
the \fIUserList(5)\fR manpage,
the \fIbos_addhost(8)\fR manpage,
the \fIbos_addkey(8)\fR manpage,
the \fIbos_adduser(8)\fR manpage,
the \fIbos_apropos(8)\fR manpage,
the \fIbos_create(8)\fR manpage,
the \fIbos_delete(8)\fR manpage,
the \fIbos_exec(8)\fR manpage,
the \fIbos_getdate(8)\fR manpage,
the \fIbos_getlog(8)\fR manpage,
the \fIbos_getrestart(8)\fR manpage,
the \fIbos_help(8)\fR manpage,
the \fIbos_install(8)\fR manpage,
the \fIbos_listhosts(8)\fR manpage,
the \fIbos_listkeys(8)\fR manpage,
the \fIbos_listusers(8)\fR manpage,
the \fIbos_prune(8)\fR manpage,
the \fIbos_removehost(8)\fR manpage,
the \fIbos_removekey(8)\fR manpage,
the \fIbos_removeuser(8)\fR manpage,
the \fIbos_restart(8)\fR manpage,
the \fIbos_salvage(8)\fR manpage,
the \fIbos_setauth(8)\fR manpage,
the \fIbos_setcellname(8)\fR manpage,
the \fIbos_setrestart(8)\fR manpage,
the \fIbos_shutdown(8)\fR manpage,
the \fIbos_start(8)\fR manpage,
the \fIbos_startup(8)\fR manpage,
the \fIbos_status(8)\fR manpage,
the \fIbos_stop(8)\fR manpage,
the \fIbos_uninstall(8)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "bos 8"
.IX Name "bos - Introduction to the bos command suite"

.IX Header "NAME"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-help\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-server\fR <\fImachine name\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

