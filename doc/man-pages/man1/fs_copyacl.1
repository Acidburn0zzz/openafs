.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH FS_COPYACL 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
fs copyacl \- Copies an ACL from a directory to one or more other directories
.SH "SYNOPSIS"
\fBfs copyacl\fR <<\ \fB\-fromdir\fR\ <\fIsource\ directory\ (or\ DFS\ file)\fR >>>
    <<\ \fB\-todir\fR\ <\fIdestination\ directory\ (or\ DFS\ file)\fR+ >>>
    [\fB\-clear\fR] [\fB\-id\fR] [\fB\-if\fR] [\-help]
.PP
\fBfs co\fR <<\ \fB\-f\fR\ <\fIsource\ directory\ (or\ DFS\ file)\fR >>>
    <<\ \fB\-t\fR\ <\fIdestination\ directory\ (or\ DFS\ file)\fR+ >>>
    [\fB\-c\fR] [\fB\-id\fR] [\fB\-if\fR] [\-h]
.SH "DESCRIPTION"
The fs copyacl command copies the access control list (ACL) from a source
directory to each specified destination directory. The source directory's
ACL is unchanged, and changes to the destination directory's ACL obey the
following rules:
.Ip "\(bu" 4
If an entry on the source \s-1ACL\s0 does not already exist on the destination
\s-1ACL\s0, it is added.
.Ip "\(bu" 4
If an entry exists on both the source and destination ACLs, the
permissions from the source \s-1ACL\s0 entry replace the current permissions on
the destination \s-1ACL\s0 entry.
.Ip "\(bu" 4
If an entry on the destination \s-1ACL\s0 has no corresponding entry on the
source \s-1ACL\s0, it is removed if the \fB\-clear\fR flag is included and is
unchanged otherwise. In other words, if the \fB\-clear\fR flag is provided,
the source \s-1ACL\s0 completely replaces the destination \s-1ACL\s0.
.PP
When using this command to copy ACLs between objects in \s-1DFS\s0 filespace
accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol Translator, it is
possible to specify files, as well as directories, with the \fB\-fromdir\fR
and \fB\-todir\fR arguments. For more information on copying ACLs between \s-1DFS\s0
directories and files, refer to the \fI\s-1IBM\s0 \s-1AFS\s0/\s-1DFS\s0 Migration Toolkit
Administration Guide and Reference\fR.
.SH "CAUTIONS"
Do not copy ACLs between AFS and DFS files or directories. The ACL formats
are incompatible.
.SH "OPTIONS"
.Ip "\fB\-fromdir\fR <\fIsource directory\fR>" 4
Specifies the source directory from which to copy the \s-1ACL\s0.  (Specifying an
\s-1AFS\s0 file copies its directory's \s-1ACL\s0, but specifying a \s-1DFS\s0 file copies its
own \s-1ACL\s0.) A partial pathname is interpreted relative to the current
working directory.
.Ip "\fB\-todir\fR <\fIdestination directory\fR>" 4
Specifies each directory for which to alter the \s-1ACL\s0 to match the source
\s-1ACL\s0. (Specifying an \s-1AFS\s0 file halts the command with an error, but
specifying a \s-1DFS\s0 file alters the file's \s-1ACL\s0). A partial pathname is
interpreted relative to the current working directory.
.Sp
Specify the read/write path to each directory (or \s-1DFS\s0 file), to avoid the
failure that results from attempting to change a read-only volume. By
convention, the read/write path is indicated by placing a period before
the cell name at the pathname's second level (for example,
\f(CW/afs/.abc.com\fR). For further discussion of the concept of read/write and
read-only paths through the filespace, see the \fBfs mkmount\fR reference
page.
.Ip "\fB\-clear\fR" 4
Replaces the \s-1ACL\s0 of each destination directory with the source \s-1ACL\s0.
.Ip "\fB\-id\fR" 4
Modifies the Initial Container \s-1ACL\s0 of each \s-1DFS\s0 directory named by the
\fB\-todir\fR argument, rather than the regular Object \s-1ACL\s0. This argument is
supported only when both the source and each destination directory reside
in \s-1DFS\s0 and are accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol
Translator.
.Ip "\fB\-if\fR" 4
Modifies the Initial Object \s-1ACL\s0 of each \s-1DFS\s0 directory named by the
\fB\-todir\fR argument, rather than the regular Object \s-1ACL\s0. This argument is
supported only when both the source and each destination directory reside
in \s-1DFS\s0 and are accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol
Translator.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
The following example command copies the current working directory's ACL
to its subdirectory called \fIreports\fR. Note that the source directory's
ACL is unaffected. Entries on the \fIreports\fR directory's that are not on
the source ACL of the current directory remain unaffected as well, because
the \fB\-clear\fR flag is not used.
.PP
.Vb 11
\&   % fs listacl . reports
\&   Access list for . is
\&   Normal rights:
\&      pat rlidwka
\&      smith rlidwk
\&   Access list for reports is
\&   Normal rights:
\&      pat rl
\&      pat:friends rl
\&   Negative rights
\&      jones rlidwka
.Ve
.Vb 1
\&   % fs copyacl -fromdir . -todir reports
.Ve
.Vb 12
\&   % fs listacl . reports
\&   Access list for . is
\&   Normal rights:
\&      pat rlidwka
\&      smith rlidwk
\&   Access list for reports is
\&   Normal rights:
\&      pat rlidwka
\&      pat:friends rl
\&      smith rlidwk
\&   Negative rights
\&      jones rlidwka
.Ve
.SH "PRIVILEGE REQUIRED"
To copy an ACL between AFS objects, the issuer must have the \f(CWl\fR (lookup)
permission on the source directory's ACL and the \f(CWa\fR (administer)
permission on each destination directory's ACL. If the \fB\-fromdir\fR
argument names a file rather than a directory, the issuer must have both
the \f(CWl\fR and \f(CWr\fR (read) permissions on the ACL of the file's directory.
.PP
To copy an ACL between DFS objects, the issuer must have the r permission
on the source directory or file's ACL and the \f(CWc\fR (control) permission on
each destination directory or file's ACL.
.SH "SEE ALSO"
the \fIfs_listacl(1)\fR manpage,
the \fIfs_mkmount(1)\fR manpage,
the \fIfs_setacl(1)\fR manpage
.PP
\fIIBM AFS/DFS Migration Toolkit Administration Guide and Reference\fR
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "FS_COPYACL 1"
.IX Name "fs copyacl - Copies an ACL from a directory to one or more other directories"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "CAUTIONS"

.IX Header "OPTIONS"

.IX Item "\fB\-fromdir\fR <\fIsource directory\fR>"

.IX Item "\fB\-todir\fR <\fIdestination directory\fR>"

.IX Item "\fB\-clear\fR"

.IX Item "\fB\-id\fR"

.IX Item "\fB\-if\fR"

.IX Item "\fB\-help\fR"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

