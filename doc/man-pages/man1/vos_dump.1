.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS_DUMP 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos dump \- Converts a volume into ASCII format and writes it to a file
.SH "SYNOPSIS"
\fBvos dump\fR <<\ \fB\-id\fR\ <\fIvolume\ name\ or\ ID\fR >>> <<\ [\fB\-time\fR\ <\fIdump\ from\ time\fR] >>>
    <<\ [\fB\-file\fR\ <\fIdump\ file\fR] >>> <<\ [\fB\-server\fR\ <\fIserver\fR] >>>
    <<\ [\fB\-partition\fR\ <\fIpartition\fR] >>> <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>>
    [\fB\-noauth\fR] [\fB\-localauth\fR] [\fB\-verbose\fR] [\fB\-help\fR]
.PP
\fBvos du\fR <<\ \fB\-i\fR\ <\fIvolume\ name\ or\ ID\fR >>> <<\ [\fB\-t\fR\ <\fIdump\ from\ time\fR] >>>
    <<\ [\fB\-f\fR\ <\fIdump\ file\fR] >>> <<\ [\fB\-s\fR\ <\fIserver\fR] >>> <<\ [\fB\-p\fR\ <\fIpartition\fR] >>>
    <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>> [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBvos dump\fR command converts the contents of the indicated volume,
which can be read/write, read-only or backup, into ASCII format. The
Volume Server writes the converted contents to the file named by the
\fB\-file\fR argument, or to the standard output stream. In the latter case,
the output can be directed to a named pipe, which enables interoperation
with third-party backup utilities.
.PP
To dump the complete contents of a volume (create a \fIfull dump\fR), omit
the \fB\-time\fR argument or specify the value \f(CW0\fR (zero) for it. To create
an \fIincremental dump\fR, which includes only the files and directories in
the volume that have modification timestamps later than a certain time,
specify a date and time as the value for the \fB\-time\fR argument.
.PP
By default, the vos command interpreter consults the Volume Location
Database (VLDB) to learn the volume's location, so the \fB\-server\fR and
\fB\-partition\fR arguments are not required. If the \fB\-id\fR argument
identifies a read-only volume that resides at multiple sites, the command
dumps the version from just one of them (normally, the one listed first in
the volume's VLDB entry as reported by the \fBvos examine\fR or \fBvos
listvldb\fR command). To dump the read-only volume from a particular site,
use the \fB\-server\fR and \fB\-partition\fR arguments to specify the site. To
bypass the VLDB lookup entirely, provide a volume ID number (rather than a
volume name) as the value for the \fB\-id\fR argument, together with the
\fB\-server\fR and \fB\-partition\fR arguments. This makes it possible to dump a
volume for which there is no VLDB entry.
.PP
During the dump operation, the volume is inaccessible both to Cache
Managers and to other volume operations. Dumping a volume does not
otherwise affect its status on the partition or its VLDB entry.
.PP
To restore a dumped volume back into AFS, use the \fBvos restore\fR command.
.SH "CAUTIONS"
Support for incremental dumps is provided to facilitate interoperation
with third-party backup utilities. The \fBvos dump\fR command does not
provide any of the administrative facilities of an actual backup system,
so the administrator must keep manual records of dump times and the
relationship between full and incremental dumps of a volume. For a
volume's contents to be consistent after restoration of incremental dumps,
there must be no gap between the time at which a prior dump of the volume
was created and the value of the \fB\-time\fR argument to the \fBvos dump\fR
command that creates the incremental dump. More specifically, for a
read/write volume, the \fB\-time\fR argument must specify the time that the
prior dump was performed, and for a read-only or backup volume it must
specify the time that the volume was last released (using the \fBvos
release\fR command) or cloned (using the \fBvos backup\fR or \fBvos backupsys\fR
command) prior to dumping it. The parent dump can be either a full dump or
another incremental dump.
.SH "OPTIONS"
.Ip "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
Specifies either the complete name or volume \s-1ID\s0 number of the read/write,
read-only, or backup volume to dump.
.Ip "\fB\-time\fR <\fIdump from time\fR>" 4
Specifies whether the dump is full or incremental. Omit this argument to
create a full dump, or provide one of three acceptable values:
.Ip "\(bu" 8
The value \f(CW0\fR (zero) to create a full dump.
.Ip "\(bu" 8
A date in the format \fImm\fR\fB/\fR\fIdd\fR\fB/\fR\fIyyyy\fR (month, day and year) to
create an incremental dump that includes only files and directories with
modification timestamps later than midnight (12:00 a.m.) on the indicated
date. Valid values for the year range from \f(CW1970\fR to \f(CW2037\fR; higher
values are not valid because the latest possible date in the standard \s-1UNIX\s0
representation is in 2038. The command interpreter automatically reduces
later dates to the maximum value. An example is \f(CW01/13/1999\fR.
.Ip "\(bu" 8
A date and time in the format \fB\*(R"\fR\fImm\fR\fB/\fR\fIdd\fR\fB/\fR\fIyyyy\fR
\fIhh\fR\fB:\fR\fI\s-1MM\s0\fR\fB\*(R"\fR to create an incremental dump that includes only files
and directories with modification timestamps later than the specified date
and time. The date format is the same as for a date alone. Express the
time as hours and minutes (\fIhh\fR:\fI\s-1MM\s0\fR) in 24-hour format (for example,
\fB20:30\fR is 8:30 p.m.). Surround the entire expression with double quotes
(\f(CW""\fR) because it contains a space.  An example is \f(CW"01/13/1999 22:30"\fR.
.Ip "\fB\-file\fR <\fIdump file\fR>" 4
Specifies the pathname of the file to which to write the dump. The file
can be in \s-1AFS\s0, but not in the volume being dumped. A partial pathname is
interpreted relative to the current working directory. If this argument is
omitted, the dump is directed to the standard output stream.
.Ip "\fB\-server\fR <\fIserver name\fR>" 4
Specifies the file server machine on which the volume resides.  Provide
the \fB\-partition\fR argument along with this one.
.Ip "\fB\-partition\fR <\fIpartition name\fR>" 4
Specifies the partition on which the volume resides. Provide the
\fB\-server\fR argument along with this one.
.Ip "\fB\-cell\fR <\fIcell name\fR" 4
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity anonymous to the issuer. Do not combine
this flag with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using a key from the local
\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\fB\-noauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
The following command writes a full dump of the volume \f(CWuser.terry\fR to
the file \fI/afs/abc.com/common/dumps/terry.dump\fR.
.PP
.Vb 1
\&   % vos dump -id user.terry -time 0 -file /afs/abc.com/common/dumps/terry.dump
.Ve
The following command writes an incremental dump of the volume
\f(CWuser.smith\fR to the file \f(CWsmith.990131.dump\fR in the current working
directory. Only those files in the volume with modification time stamps
later than 6:00 p.m. on 31 January 1999 are included in the dump.
.PP
.Vb 1
\&   % vos dump -id user.smith -time "01/31/1999 18:00" -file smith.990131.dump
.Ve
.SH "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the
machine specified with the \fB\-server\fR argument and on each database server
machine. If the \fB\-localauth\fR flag is included, the issuer must instead be
logged on to a server machine as the local superuser \f(CWroot\fR.
.PP
If the \fB\-file\fR argument is included, the issuer must also have permission
to insert and write in the directory that houses the file.
.SH "SEE ALSO"
the \fIvos(1)\fR manpage,
the \fIvos_examine(1)\fR manpage,
the \fIvos_listvldb(1)\fR manpage,
the \fIvos_restore(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS_DUMP 1"
.IX Name "vos dump - Converts a volume into ASCII format and writes it to a file"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Header "CAUTIONS"

.IX Header "OPTIONS"

.IX Item "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>"

.IX Item "\fB\-time\fR <\fIdump from time\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-file\fR <\fIdump file\fR>"

.IX Item "\fB\-server\fR <\fIserver name\fR>"

.IX Item "\fB\-partition\fR <\fIpartition name\fR>"

.IX Item "\fB\-cell\fR <\fIcell name\fR"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-verbose\fR"

.IX Item "\fB\-help\fR"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

