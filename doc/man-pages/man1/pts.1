.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH PTS 1 "OpenAFS" "4/Feb/2008" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
pts \- Introduction to the pts command suite
.SH "DESCRIPTION"
The commands in the \fBpts\fR command suite are the administrative interface
to the Protection Server, which runs on each database server machine in a
cell and maintains the Protection Database. The database stores the
information that AFS uses to augment and refine the standard UNIX scheme
for controlling access to files and directories.
.PP
Instead of relying only on the mode bits that define access rights for
individual files, AFS associates an access control list (ACL) with each
directory. The ACL lists users and groups and specifies which of seven
possible access permissions they have for the directory and the files it
contains. (It is still possible to set a directory or file's mode bits,
but AFS interprets them in its own way; see the chapter on protection in
the \fIIBM AFS Administration Guide\fR for details.)
.PP
AFS enables users to define groups in the Protection Database and place
them on ACLs to extend a set of rights to multiple users simultaneously.
Groups simplify administration by making it possible to add someone to
many ACLs by adding them to a group that already exists on those
ACLs. Machines can also be members of a group, so that users logged into
the machine automatically inherit the permissions granted to the group.
.PP
There are several categories of commands in the pts command suite:
.Ip "\(bu" 4
Commands to create and remove Protection Database entries: \fBpts
creategroup\fR, \fBpts createuser\fR, and \fBpts delete\fR.
.Ip "\(bu" 4
Commands to administer and display group membership: \fBpts adduser\fR, \fBpts
listowned\fR, \fBpts membership\fR, and \fBpts removeuser\fR.
.Ip "\(bu" 4
Commands to administer and display properties of user and group entries
other than membership: \fBpts chown\fR, \fBpts examine\fR, \fBpts listentries\fR,
\fBpts rename\fR, and \fBpts setfields\fR.
.Ip "\(bu" 4
Commands to set and examine the counters used when assigning IDs to users
and groups: \fBpts listmax\fR and \fBpts setmax\fR.
.Ip "\(bu" 4
Commands to run commands interactively: \fBpts interactive\fR, \fBpts
sleep\fR, and \fBpts quit\fR.
.Ip "\(bu" 4
A command to run commands from a file: \fBpts source\fR.
.Ip "\(bu" 4
Commands to obtain help: \fBpts apropos\fR and \fBpts help\fR.
.SH "OPTIONS"
The following arguments and flags are available on many commands in the
\fBpts\fR suite. The reference page for each command also lists them, but
they are described here in greater detail.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. It is acceptable to abbreviate
the cell name to the shortest form that distinguishes it from the other
entries in the \fI/usr/vice/etc/CellServDB\fR file on the local machine. If
the \fB\-cell\fR argument is omitted, the command interpreter determines the
name of the local cell by reading the following in order:
.Ip "\(bu" 8
The value of the \s-1AFSCELL\s0 environment variable.
.Ip "\(bu" 8
The local \fI/usr/vice/etc/ThisCell\fR file.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell.
.Ip "\fB\-force\fR" 4
Enables the command to continue executing as far as possible when errors
or other problems occur, rather than halting execution immediately.
Without it, the command halts as soon as the first error is
encountered. In either case, the \fBpts\fR command interpreter reports errors
at the command shell. This flag is especially useful if the issuer
provides many values for a command line argument; if one of them is
invalid, the command interpreter continues on to process the remaining
arguments.
.Ip "\fB\-help\fR" 4
Prints a command's online help message on the standard output stream. Do
not combine this flag with any of the command's other options; when it is
provided, the command interpreter ignores all other options, and only
prints the help message.
.Ip "\fB\-noauth\fR" 4
Establishes an unauthenticated connection to the Protection Server, in
which the server treats the issuer as the unprivileged user
\f(CWanonymous\fR. It is useful only when authorization checking is disabled on
the server machine (during the installation of a file server machine or
when the \fBbos setauth\fR command has been used during other unusual
circumstances). In normal circumstances, the Protection Server allows only
privileged users to issue commands that change the Protection Database,
and refuses to perform such an action even if the \fB\-noauth\fR flag is
provided.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using the server encryption key with the
highest key version number in the local \fI/usr/afs/etc/KeyFile\fR file. The
\fBpts\fR command interpreter presents the ticket, which never expires, to
the \s-1BOS\s0 Server during mutual authentication.
.Sp
Use this flag only when issuing a command on a server machine; client
machines do not usually have a \fI/usr/afs/etc/KeyFile\fR file.  The issuer
of a command that includes this flag must be logged on to the server
machine as the local superuser \f(CWroot\fR. The flag is useful for commands
invoked by an unattended application program, such as a process controlled
by the \s-1UNIX\s0 \fBcron\fR utility. It is also useful if an administrator is
unable to authenticate to \s-1AFS\s0 but is logged in as the local superuser
\f(CWroot\fR.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell. Also, do not combine the \fB\-localauth\fR and
\fB\-noauth\fR flags.
.SH "PRIVILEGE REQUIRED"
Members of the system:administrators group can issue all \fBpts\fR commands
on any entry in the Protection Database.
.PP
Users who do not belong to the system:administrators group can list
information about their own entry and any group entries they own. The
privacy flags set with the \fBpts setfields\fR command control access to
entries owned by other users.
.SH "SEE ALSO"
the \fIpts_adduser(1)\fR manpage,
the \fIpts_apropos(1)\fR manpage,
the \fIpts_chown(1)\fR manpage,
the \fIpts_creategroup(1)\fR manpage,
the \fIpts_createuser(1)\fR manpage,
the \fIpts_delete(1)\fR manpage,
the \fIpts_examine(1)\fR manpage,
the \fIpts_help(1)\fR manpage,
the \fIpts_interactive(1)\fR manpage,
the \fIpts_listentries(1)\fR manpage,
the \fIpts_listmax(1)\fR manpage,
the \fIpts_listowned(1)\fR manpage,
the \fIpts_membership(1)\fR manpage,
the \fIpts_quit(1)\fR manpage,
the \fIpts_removeuser(1)\fR manpage,
the \fIpts_rename(1)\fR manpage,
the \fIpts_setfields(1)\fR manpage,
the \fIpts_setmax(1)\fR manpage,
the \fIpts_sleep(1)\fR manpage,
the \fIpts_source(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "PTS 1"
.IX Name "pts - Introduction to the pts command suite"

.IX Header "NAME"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-force\fR"

.IX Item "\fB\-help\fR"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

