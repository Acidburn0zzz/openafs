.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS_MOVE 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos move \- Moves a read/write volume to another site
.SH "SYNOPSIS"
\fBvos move\fR <<\ \fB\-id\fR\ <\fIvolume\ name\ or\ ID\fR >>>
    <<\ \fB\-fromserver\fR\ <\fImachine\ name\ on\ source\fR >>>
    <<\ \fB\-frompartition\fR\ <\fIpartition\ name\ on\ source\fR >>>
    <<\ \fB\-toserver\fR\ <\fImachine\ name\ on\ destination\fR >>>
    <<\ \fB\-topartition\fR\ <\fIpartition\ name\ on\ destination\fR >>>
    <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>> [\fB\-noauth\fR] [\fB\-localauth\fR] [\fB\-verbose\fR]
    [\fB\-help\fR]
.PP
\fBvos m\fR <<\ \fB\-i\fR\ <\fIvolume\ name\ or\ ID\fR >>>
    <<\ \fB\-froms\fR\ <\fImachine\ name\ on\ source\fR >>>
    <<\ \fB\-fromp\fR\ <\fIpartition\ name\ on\ source\fR >>>
    <<\ \fB\-tos\fR\ <\fImachine\ name\ on\ destination\fR >>>
    <<\ \fB\-top\fR\ <\fIpartition\ name\ on\ destination\fR >>>
    <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>> [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBvos move\fR command moves the indicated read/write volume from its
current site (specified with the \fB\-fromserver\fR and \fB\-frompartition\fR
arguments) to the destination site (specified with the \fB\-toserver\fR and
\fB\-topartition\fR arguments). This command automatically removes the backup
copy from the current site, if it exists. To create a new backup volume at
the destination site, use the \fBvos backup\fR command.
.PP
This command works on read/write volumes only. To move a read-only volume,
use the \fBvos addsite\fR and \fBvos release\fR commands to define a new
read-only site and release the volume contents to it, and then use the
\fBvos remove\fR command to remove the previous read-only volume's definition
from the Volume Location Database (VLDB) and data from the partition. To
move a backup volume, use this command to move its read/write source and
then issue the \fBvos backup\fR command.
.PP
Before executing this command, the \fBvos\fR command interpreter initiates a
check that the destination partition contains enough space to house the
volume being moved. If there is not enough space, the move operation is
not attempted and the following message appears:
.PP
.Vb 1
\&   vos: no space on target partition <dest_part> to move volume <volume>
.Ve
.SH "CAUTIONS"
Unless there is a compelling reason, do not interrupt a \fBvos move\fR
command in progress. Interrupting a move can result in one or more of the
following inconsistent states:
.Ip "\(bu" 4
There are two versions of the volume, one at the source site and one at
the destination site. (If this happens, retain the version identified by
the \s-1VLDB\s0 and use the \fBvos zap\fR command to remove the other version.)
.Ip "\(bu" 4
The backup version of the volume is stranded at the old site. (If this
happens, use the \fBvos zap\fR command to remove it.)
.Ip "\(bu" 4
The volume is off-line. (If this happens, run the \fBbos salvage\fR command
to bring it back on line.)
.PP
If the Ctrl-C interrupt signal is pressed while a vos move operation is
executing, the following message warns of the consequences and requests
confirmation of the kill signal:
.PP
.Vb 3
\&   SIGINT handler: vos move operation in progress
\&   WARNING: may leave AFS storage and metadata in indeterminate state
\&   enter second control-c to exit
.Ve
To confirm termination of the operation, press Ctrl-C a second time; press
any other key to continue the operation.
.SH "OPTIONS"
.Ip "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
Specifies either the complete name or volume \s-1ID\s0 number of a read/write
volume.
.Ip "\fB\-fromserver\fR <\fIserver name\fR>" 4
Identifies the file server machine where the volume currently
resides. Provide the machine's \s-1IP\s0 address or its host name (either fully
qualified or using an unambiguous abbreviation). For details, see
the \fIvos(1)\fR manpage.
.Ip "\fB\-frompartition\fR <\fIpartition name\fR>" 4
Names the partition where the volume currently resides. Provide the full
partition name (for, example, \fB/vicepa\fR) or one of the abbreviated forms
described in the \fIvos(1)\fR manpage.
.Ip "\fB\-toserver\fR <\fIserver name\fR>" 4
Identifies the file server machine to which to move the volume.  Provide
the machine's \s-1IP\s0 address or its host name (either fully qualified or using
an unambiguous abbreviation). For details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-topartition\fR <\fIpartition name\fR>" 4
Names the partition to which to move the volume. Provide the full
partition name (for, example, \fB/vicepa\fR) or one of the abbreviated forms
described in the \fIvos(1)\fR manpage.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity \f(CWanonymous\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
the \fIvos(1)\fR manpage.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using a key from the local
\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\fB\-noauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
The following example moves the volume \f(CWuser.smith\fR from the \fI/vicepb\fR
partition on the file server machine \f(CWfs3.abc.com\fR to the \fI/vicepg\fR
partition on the file server machine \f(CWfs7.abc.com\fR.
.PP
.Vb 2
\&   % vos move -id user.smith -fromserver fs3.abc.com -frompartition b \e
\&       -toserver fs7.abc.com -topartition g
.Ve
.SH "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the
machines specified with the \fB\-toserver\fR and \fB\-fromserver\fR arguments and
on each database server machine.  If the \fB\-localauth\fR flag is included,
the issuer must instead be logged on to a server machine as the local
superuser \f(CWroot\fR.
.SH "SEE ALSO"
the \fIvos(1)\fR manpage,
the \fIvos_addsite(1)\fR manpage,
the \fIvos_backup(1)\fR manpage,
the \fIvos_release(1)\fR manpage,
the \fIvos_listvol(1)\fR manpage,
the \fIvos_remove(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS_MOVE 1"
.IX Name "vos move - Moves a read/write volume to another site"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Header "CAUTIONS"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>"

.IX Item "\fB\-fromserver\fR <\fIserver name\fR>"

.IX Item "\fB\-frompartition\fR <\fIpartition name\fR>"

.IX Item "\fB\-toserver\fR <\fIserver name\fR>"

.IX Item "\fB\-topartition\fR <\fIpartition name\fR>"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-verbose\fR"

.IX Item "\fB\-help\fR"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

