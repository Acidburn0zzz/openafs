.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS_EXAMINE 1 "OpenAFS" "13/Jul/2008" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos_examine \- Shows volume header and VLDB entry information for a volume
.SH "SYNOPSIS"
\fBvos examine\fR <<\ \fB\-id\fR\ <\fIvolume\ name\ or\ ID\fR >>> [\fB\-extended\fR]
    <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>> [\fB\-noauth\fR] [\fB\-localauth\fR] [\fB\-verbose\fR]
    [\fB\-help\fR]
.PP
\fBvos e\fR <<\ \fB\-i\fR\ <\fIvolume\ name\ or\ ID\fR >>> [\fB\-e\fR] <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-h\fR]
.PP
\fBvos volinfo\fR <<\ \fB\-i\fR\ <\fIvolume\ name\ or\ ID\fR >>> [\fB\-e\fR] [\-c <\fIcell name\fR>]
    [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-h\fR]
.PP
\fBvos v\fR <<\ \fB\-i\fR\ <\fIvolume\ name\ or\ ID\fR >>> [\fB\-e\fR] <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBvos examine\fR command formats and displays information from the
Volume Location Database (VLDB) entry and the volume header of the volume
specified by the \fB\-id\fR argument.
.PP
To display the volume header only, use the \fBvos listvol\fR command. To
display information from the VLDB only, use the \fBvos listvldb\fR command.
.SH "CAUTIONS"
Currently, the maximum size of a volume is 2 terabytes (2^31 bytes).
.SH "OPTIONS"
.Ip "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
Specifies either the complete name or volume \s-1ID\s0 number of the volume,
which can be read/write, read-only, or backup.
.Ip "\fB\-extended\fR" 4
Display statistics about read and write operations on files and
directories in the volume.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity \f(CWanonymous\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
the \fIvos(1)\fR manpage.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using a key from the local
\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\fB\-noauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
The first seven lines of the output show information from the volume
header and the remaining lines come from the VLDB. Each item in the
following list corresponds to a line of output derived from the volume
header.
.Ip "\(bu" 4
Basic information about the specified volume (displayed on a single
line):
.Ip "\(bu" 8
Name
.Ip "\(bu" 8
Volume \s-1ID\s0 number
.Ip "\(bu" 8
Type (the flag is \f(CWRW\fR for read/write, \f(CWRO\fR for read-only, \f(CWBK\fR for
backup)
.Ip "\(bu" 8
Size in kilobytes (\f(CW1024\fR equals a megabyte)
.Ip "\(bu" 8
Number of files in the volume, if the \fB\-extended\fR flag is provided
.Ip "\(bu" 8
Status on the file server machine, which is one of the following:
.Ip "On-line" 12
The volume is completely accessible to Cache Managers.
.Ip "Off-line" 12
The volume is not accessible to Cache Managers, but does not seem to be
corrupted. This status appears while a volume is being dumped, for
example.
.Ip "Off-line**needs salvage**" 12
The volume is not accessible to Cache Managers, because it seems to be
corrupted. Use the \fBbos salvage\fR or \fBsalvager\fR command to repair the
corruption.
.Ip "\(bu" 4
The file server machine and partition that house the volume, as determined
by the command interpreter as the command runs, rather than derived from
the \s-1VLDB\s0 or the volume header.
.Ip "\(bu" 4
The volume \s-1ID\s0 numbers associated with the various versions of the volume:
read/write (\f(CWRWrite\fR), read-only (\f(CWROnly\fR), backup (\f(CWBackup\fR), and
ReleaseClone (\f(CWRClone\fR). One of them matches the volume \s-1ID\s0 number that
appears on the first line of the volume's output. If the value in the
\f(CWRWrite\fR, \f(CWROnly\fR, or \f(CWBackup\fR field is \f(CW0\fR (zero), there is no volume
of that type. If there is currently no ReleaseClone, the \f(CWRClone\fR field
does not appear at all.
.Ip "\(bu" 4
The maximum space quota allotted to the read/write copy of the volume,
expressed in kilobyte blocks in the \f(CWMaxQuota\fR field.
.Ip "\(bu" 4
The date and time the volume was created, in the \f(CWCreation\fR field. If the
volume has been restored with the \fBbackup diskrestore\fR, \fBbackup
volrestore\fR, or \fBvos restore\fR command, this is the restore time.
.Ip "\(bu" 4
The date and time when the contents of the volume last changed, in the
\f(CWLast Update\fR field. For read-only and backup volumes, it matches the
timestamp in the \f(CWCreation\fR field.
.Ip "\(bu" 4
The number of times the volume has been accessed for a fetch or store
operation since the later of the two following times:
.Ip "\(bu" 8
12:00 a.m. on the day the command is issued
.Ip "\(bu" 8
The last time the volume changed location
.PP
When the \fB\-extended\fR flag is included, two tables appear next:
.Ip "\(bu" 4
The table labeled \f(CWRaw Read/Write Stats\fR contains information on the
number of reads (fetches) and writes (stores) made on the specified
volume.
.Ip "\(bu" 4
The table labeled \f(CWWrites Affecting Authorship\fR contains information on
writes made to files and directories in the specified volume.
.PP
If the following message appears instead of the previously listed
information, it indicates that a volume is not accessible to Cache
Managers or the \fBvos\fR command interpreter, for example because a clone is
being created.
.PP
.Vb 1
\&   **** Volume <volume_ID> is busy ****
.Ve
If the following message appears instead of the previously listed
information, it indicates that the File Server is unable to attach the
volume, perhaps because it is seriously corrupted. The \fIFileLog\fR and
\fIVolserLog\fR log files in the \fI/usr/afs/logs\fR directory on the file
server machine possibly provide additional information; use the \fBbos
getlog\fR command to display them.
.PP
.Vb 1
\&   **** Could not attach volume <volume_ID> ****
.Ve
Following a blank line, information from the \s-1VLDB\s0 entry appears.  Each
item in this list corresponds to a separate line in the output:
.Ip "\(bu" 4
The base (read/write) volume name. The read-only and backup versions have
the same name with a \f(CW.readonly\fR and \f(CW.backup\fR extension, respectively.
.Ip "\(bu" 4
The volume \s-1ID\s0 numbers allocated to the versions of the volume that
actually exist, in fields labeled \f(CWRWrite\fR for the read/write, \f(CWROnly\fR
for the read-only, \f(CWBackup\fR for the backup, and \f(CWRClone\fR for the
ReleaseClone. (If a field does not appear, the corresponding version of
the volume does not exist.) The appearance of the \f(CWRClone\fR field normally
indicates that a release operation did not complete successfully; the
\f(CWOld release\fR and \f(CWNew release\fR flags often also appear on one or more
of the site definition lines described just following.
.Ip "\(bu" 4
The number of sites that house a read/write or read-only copy of the
volume, following the string \f(CW< number of sites -\fR >>.
.Ip "\(bu" 4
A line for each site that houses a read/write or read-only copy of the
volume, specifying the file server machine, partition, and type of volume
(\f(CWRW\fR for read/write or \f(CWRO\fR for read-only). If a backup version exists,
it is understood to share the read/write site.  Several flags can appear
with a site definition:
.Ip "Not released" 8
Indicates that the vos release command has not been issued since the \fBvos
addsite\fR command was used to define the read-only site.
.Ip "Old release" 8
Indicates that a vos release command did not complete successfully,
leaving the previous, obsolete version of the volume at this site.
.Ip "New release" 8
Indicates that a vos release command did not complete successfully, but
that this site did receive the correct new version of the volume.
.Ip "\(bu" 4
If the \s-1VLDB\s0 entry is locked, the string \f(CWVolume is currently LOCKED\fR.
.PP
For further discussion of the \f(CWNew release\fR and \f(CWOld release\fR flags, see
the \fIvos_release(1)\fR manpage.
.SH "EXAMPLES"
The following example shows output for the ABC Corporation volume called
\f(CWusr\fR with two read-only replication sites (this volume is mounted at the
\fI/afs/abc.com/usr\fR directory). For the sake of illustration, the output
shows the volume as locked.
.PP
.Vb 14
\&   % vos examine usr
\&   usr                           536870981 RW   3459 K On-line
\&        fs2.abc.com /vicepb
\&        RWrite 5360870981   ROnly 536870982   Backup 536870983
\&        MaxQuota      40000 K
\&        Creation    Mon Jun 12 15:22:06 1989
\&        Last Update Fri Jun 16 09:34:35 1989
\&        5719 accesses in the past day (i.e., vnode references)
\&        RWrite: 5360870981   ROnly: 536870982   Backup: 536870983
\&        number of sites -> 3
\&           server fs1.abc.com partition /vicepa RO Site
\&           server fs3.abc.com partition /vicepa RO Site
\&           server fs2.abc.com partition /vicepb RW Site
\&        Volume is currently LOCKED
.Ve
The following example shows the output for the volume \f(CWuser.terry\fR using
the \fB\-extended\fR flag. The volume has no read-only replication sites.
.PP
.Vb 33
\&   % vos examine -id user.terry -extended
\&   user.terry         354287190 RW    2302 K used 119 files On-line
\&       fs4.abc.com /vicepc
\&       RWrite 354287190 ROnly          0 Backup 354287192
\&       MaxQuota       5000 K
\&       Creation    Wed Nov 25 17:38:57 1992
\&       Last Update Tue Dec 15 10:46:20 1992
\&       598 accesses in the past day (i.e., vnode references)
\&                         Raw Read/Write Stats
\&             |-------------------------------------------|
\&             |    Same Network     |    Diff Network     |
\&             |----------|----------|----------|----------|
\&             |  Total   |   Auth   |   Total  |   Auth   |
\&             |----------|----------|----------|----------|
\&   Reads     |       55 |       55 |       38 |       38 |
\&   Writes    |       95 |       95 |        0 |        0 |
\&             |-------------------------------------------|
\&                      Writes Affecting Authorship
\&             |-------------------------------------------|
\&             |   File Authorship   | Directory Authorship|
\&             |----------|----------|----------|----------|
\&             |   Same   |   Diff   |    Same  |   Diff   |
\&             |----------|----------|----------|----------|
\&   0-60 sec  |       38 |        0 |       21 |        1 |
\&   1-10 min  |        2 |        0 |        7 |        0 |
\&   10min-1hr |        0 |        0 |        1 |        0 |
\&   1hr-1day  |        1 |        0 |        5 |        1 |
\&   1day-1wk  |        0 |        0 |        0 |        0 |
\&   > 1wk     |        0 |        0 |        0 |        0 |
\&             |-------------------------------------------|
\&       RWrite: 354287190    Backup: 354287192
\&       number of sites -> 1
\&          server fs4.abc.com partition /vicepc RW Site
.Ve
.SH "PRIVILEGE REQUIRED"
None
.SH "SEE ALSO"
the \fIbackup_diskrestore(8)\fR manpage,
the \fIbackup_volrestore(8)\fR manpage,
the \fIbos_getlog(8)\fR manpage,
the \fIbos_salvage(8)\fR manpage,
the \fIsalvager(8)\fR manpage,
the \fIvos(1)\fR manpage,
the \fIvos_listvol(1)\fR manpage,
the \fIvos_listvldb(1)\fR manpage,
the \fIvos_release(1)\fR manpage,
the \fIvos_restore(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS_EXAMINE 1"
.IX Name "vos_examine - Shows volume header and VLDB entry information for a volume"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Header "CAUTIONS"

.IX Header "OPTIONS"

.IX Item "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>"

.IX Item "\fB\-extended\fR"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-verbose\fR"

.IX Item "\fB\-help\fR"

.IX Header "OUTPUT"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "On-line"

.IX Item "Off-line"

.IX Item "Off-line**needs salvage**"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "Not released"

.IX Item "Old release"

.IX Item "New release"

.IX Item "\(bu"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

