.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH DLOG 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
dlog \- Authenticates to the DCE Security Service
.SH "SYNOPSIS"
\fBdlog\fR <<\ [\fB\-principal\fR\ <\fIuser\ name\fR] >>> <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-password\fR\ <\fIuser's\ password\fR] >>>
    <<\ [\fB\-servers\fR\ <\fIexplicit\ list\ of\ servers\fR+] >>>
    <<\ [\fB\-lifetime\fR\ <\fIticket\ lifetime\ in\ hh[:mm[:ss]]\fR] >>>
    [\fB\-setpag\fR] [\fB\-pipe\fR] [\fB\-help\fR]
.PP
\fBdlog\fR <<\ [\fB\-pr\fR\ <\fIuser\ name\fR] >>> <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>>
    <<\ [\fB\-pw\fR\ <\fIuser's\ password\fR] >>>
    <<\ [\fB\-ser\fR\ <\fIexplicit\ list\ of\ servers\fR+] >>>
    <<\ [\fB\-l\fR\ <\fIticket\ lifetime\ in\ hh[:mm[:ss]]\fR] >>>
    [\fB\-set\fR] [\fB\-pi\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBdlog\fR command obtains DCE credentials for the issuer from the DCE
Security Service in the cell named by the \fB\-cell\fR argument, and stores
them on the AFS client machine on which the user issues the command. The
AFS/DFS Migration Toolkit Protocol Translator processes running on
machines in the DCE cell accept the credentials, which enables the user to
access the DCE cell's filespace from the AFS client. The user's identity
in the local file system is unchanged.
.PP
If the issuer does not provide the \fB\-principal\fR argument, the \fBdlog\fR
command interpreter uses the user name under which the issuer is logged
into the local file system. Provide the DCE password for the appropriate
user name. As with the \fBklog\fR command, the password does not cross the
network in clear text (unless the issuer is logged into the AFS client
from a remote machine).
.PP
The credentials are valid for a lifetime equivalent to the smallest of the
following, all but the last of which is defined by the DCE cell's Security
Server:
.Ip "\(bu" 4
The maximum certificate lifetime for the issuer's \s-1DCE\s0 account.
.Ip "\(bu" 4
The maximum certificate lifetime for the \s-1AFS\s0 principal's \s-1DCE\s0 account.
.Ip "\(bu" 4
The registry-wide maximum certificate lifetime.
.Ip "\(bu" 4
The registry-wide default certificate lifetime.
.Ip "\(bu" 4
The lifetime requested using the \fB\-lifetime\fR argument.
.PP
If the previous maximum certificate lifetime values are set to
\f(CWdefault-policy\fR, the maximum possible ticket lifetime is defined by the
default certificate lifetime. Refer to the \s-1DCE\s0 vendor's administration
guide for more information before setting any of these values.
.PP
The \s-1AFS\s0 Cache Manager stores the ticket in a credential structure
associated with the name of the issuer (or the user named by the
\fB\-principal\fR argument. If the user already has a ticket for the \s-1DCE\s0 cell,
the ticket resulting from this command replaces it in the credential
structure.
.PP
The \s-1AFS\s0 tokens command displays the ticket obtained by the \fBdlog\fR command
for the server principal \f(CWafs\fR, regardless of the principal to which it
is actually granted. Note that the \fBtokens\fR command does not distinguish
tickets for a \s-1DFSTM\s0 File Server from tickets for an \s-1AFS\s0 File Server.
.SH "OPTIONS"
.Ip "\fB\-principal\fR <\fIuser name\fR>" 4
Specifies the \s-1DCE\s0 user name for which to obtain \s-1DCE\s0 credentials. If this
option is omitted, the \fBdlog\fR command interpreter uses the name under
which the issuer is logged into the local file system.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Specifies the \s-1DCE\s0 cell in which to authenticate. During a single login
session on a given machine, a user can authenticate in multiple cells
simultaneously, but can have only one ticket at a time for each cell (that
is, it is possible to authenticate under only one identity per cell per
machine). It is legal to abbreviate the cell name to the shortest form
that distinguishes it from the other cells listed in the
\fI/usr/vice/etc/CellServDB\fR file on the local client machine.
.Sp
If the issuer does not provide the \fB\-cell\fR argument, the \fBdlog\fR command
attempts to authenticate with the \s-1DCE\s0 Security Server for the cell defined
by
.Ip "\(bu" 8
The value of the environment variable \s-1AFSCELL\s0 on the local \s-1AFS\s0 client
machine, if defined. The issuer can set the \s-1AFSCELL\s0 environment variable
to name the desired \s-1DCE\s0 cell.
.Ip "\(bu" 8
The cell name in the \fI/usr/vice/etc/ThisCell\fR file on the local \s-1AFS\s0
client machine. The machine's administrator can place the desired \s-1DCE\s0
cell's name in the file.
.Ip "\fB\-password\fR <\fIuser's password\fR>" 4
Specifies the password for the issuer (or for the user named by the
\fB\-principal\fR argument). Using this argument is not recommended, because
it makes the password visible on the command line.  If this argument is
omitted, the command prompts for the password and does not echo it
visibly.
.Ip "\fB\-servers\fR <\fIlist of servers\fR>+" 4
Specifies a list of \s-1DFS\s0 database server machines running the Translator
Server through which the \s-1AFS\s0 client machine can attempt to
authenticate. Specify each server by hostname, shortened machine name, or
\s-1IP\s0 address. If this argument is omitted, the \fBdlog\fR command interpreter
randomly selects a machine from the list of \s-1DFS\s0 Fileset Location (\s-1FL\s0)
Servers in the \fI/usr/vice/etc/CellServDB\fR file for the \s-1DCE\s0 cell specified
by the \fB\-cell\fR argument. This argument is useful for testing when
authentication seems to be failing on certain server machines.
.Ip "\fB\-lifetime\fR <\fIticket lifetime\fR>" 4
Requests a ticket lifetime using the format \fIhh\fR\fB:\fR\fImm\fR[\fB:\fR\fIss\fR]
(hours, minutes, and optionally a number seconds between 00 and 59).  For
example, the value \f(CW168:30\fR requests a ticket lifetime of 7 days and 30
minutes, and \f(CW96:00\fR requests a lifetime of 4 days. Acceptable values
range from \f(CW00:05\fR (5 minutes) to \f(CW720:00\fR (30 days). If this argument
is not provided and no other determinants of ticket lifetime have been
changed from their defaults, ticket lifetime is 10 hours.
.Sp
The requested lifetime must be smaller than any of the \s-1DCE\s0 cell's
determinants for ticket lifetime; see the discussion in the preceding
\fBDescription\fR section.
.Ip "\fB\-setpag\fR" 4
Creates a process authentication group (\s-1PAG\s0) in which the newly created
ticket is placed. If this flag is omitted, the ticket is instead
associated with the issuers\*(R' local user \s-1ID\s0 (\s-1UID\s0).
.Ip "\fB\-pipe\fR" 4
Suppresses any prompts that the command interpreter otherwise produces,
including the prompt for the issuer's password. Instead, the command
interpreter accepts the password via the standard input stream.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
If the dlog command interpreter cannot contact a Translator
Server, it produces a message similar to the following:
.PP
.Vb 2
\&   dlog: server or network not responding -- failed to contact
\&   authentication service
.Ve
.SH "EXAMPLES"
The following command authenticates the issuer as cell_admin in the
\f(CWdce.abc.com\fR cell.
.PP
.Vb 2
\&   % dlog -principal cell_admin -cell dce.abc.com
\&   Password: <cell_admin's password>
.Ve
In the following example, the issuer authenticates as cell_admin to the
\f(CWdce.abc.com\fR cell and request a ticket lifetime of 100 hours. The
\fBtokens\fR command confirms that the user obtained DCE credentials as the
user \f(CWcell_admin\fR: the AFS ID is equivalent to the UNIX ID of \f(CW1\fR
assigned to \f(CWcell_admin\fR in \f(CWdce.abc.com\fR cell's DCE registry.
.PP
.Vb 2
\&   % dlog -principal cell_admin -cell dce.abc.com -lifetime 100
\&   Password: <cell_admin's password>
.Ve
.Vb 2
\&   % tokens
\&   Tokens held by the Cache Manager:
.Ve
.Vb 2
\&   User's (AFS ID 1) tokens for afs@dce.abc.com [Expires Jul 6 14:12]
\&   User's (AFS ID 4758) tokens for afs@abc.com [Expires Jul 2 13:14]
.Ve
.Vb 1
\&      --End of list--
.Ve
.SH "PRIVILEGE REQUIRED"
None
.SH "SEE ALSO"
the \fIdpass(1)\fR manpage,
the \fIklog(1)\fR manpage,
the \fItokens(1)\fR manpage,
the \fIunlog(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "DLOG 1"
.IX Name "dlog - Authenticates to the DCE Security Service"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-principal\fR <\fIuser name\fR>"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-password\fR <\fIuser's password\fR>"

.IX Item "\fB\-servers\fR <\fIlist of servers\fR>+"

.IX Item "\fB\-lifetime\fR <\fIticket lifetime\fR>"

.IX Item "\fB\-setpag\fR"

.IX Item "\fB\-pipe\fR"

.IX Item "\fB\-help\fR"

.IX Header "OUTPUT"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

