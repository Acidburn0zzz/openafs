.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS_LISTVOL 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos listvol \- Displays information from a volume header
.SH "SYNOPSIS"
\fBvos listvol\fR <<\ \fB\-server\fR\ <\fImachine\ name\fR >>>
    <<\ [\fB\-partition\fR\ <\fIpartition\ name\fR] >>> [\fB\-fast\fR] [\fB\-long\fR] [\fB\-quiet\fR]
    [\fB\-extended\fR] <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>> [\fB\-noauth\fR] [\fB\-localauth\fR]
    [\fB\-verbose\fR] [\fB\-help\fR]
.PP
\fBvos listvo\fR <<\ \fB\-s\fR\ <\fImachine\ name\fR >>> <<\ [\fB\-p\fR\ <\fIpartition\ name\fR] >>> [\fB\-f\fR]
    [\-lon] [\fB\-q\fR] [\fB\-e\fR] <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>> [\fB\-n\fR] [\fB\-loc\fR]
    [\fB\-v\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBvos listvol\fR command formats and displays the following information
from the volume header of each specified volume: volume name, volume ID,
volume type, size, and status at the server. The actual information
displayed depends on the combination of arguments supplied when the
command is issued. To display volume header information for various
numbers of volumes, combine the command's arguments as indicated:
.Ip "\(bu" 4
For every volume on a file server machine, specify the machine's name with
the \fB\-server\fR argument.
.Ip "\(bu" 4
For every volume at a particular site, combine the \fB\-server\fR argument
with the \fB\-partition\fR argument.
.PP
To display the Volume Location Database (\s-1VLDB\s0) entry for one or more
volumes, use the \fBvos listvldb\fR command. To display both the \s-1VLDB\s0 entry
and the volume header for a single volume, use the \fBvos examine\fR command.
.SH "OPTIONS"
.Ip "\fB\-server\fR <\fIserver name\fR>" 4
Identifies the file server machine that houses volumes for which to
display the header. Provide the machine's \s-1IP\s0 address or its host name
(either fully qualified or using an unambiguous abbreviation). For
details, see the \fIvos(1)\fR manpage.
.Sp
This argument can be combined with the \fB\-partition\fR argument, as well as
the \fB\-fast\fR, \fB\-long\fR, or \fB\-extended\fR flag.
.Ip "\fB\-partition\fR <\fIpartition name\fR>" 4
Identifies the partition (on the file server machine specified by the
\fB\-server\fR argument) that houses volumes for which to display the
header. Provide the partition's complete name with preceding slash (for
example, \fI/vicepa\fR) or use one of the three acceptable abbreviated
forms. For details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-fast\fR" 4
Displays only the volume \s-1ID\s0 numbers of volumes stored at the site
specified by the \fB\-server\fR, and optionally \fB\-partition\fR, argument. Do
not combine this flag with the \fB\-extended\fR flag.
.Ip "\fB\-long\fR" 4
Displays more detailed information about each volume stored at the site
specified by the \fB\-server\fR, and optionally \fB\-partition\fR, argument. The
information includes the volume IDs of all three volume types associated
with the volume, and the read/write volume's quota, creation date and
update date.
.Ip "\fB\-quiet\fR" 4
Suppresses the lines that summarize the number of volumes listed and their
status, which otherwise appear at the beginning and end of the output when
the output includes more than one volume.
.Ip "\fB\-extended\fR" 4
Displays extensive statistics about access patterns for each volume stored
at the site specified by the \fB\-server\fR, and optionally \fB\-partition\fR,
argument. The statistics include the number of reads and writes to files
in the volume, and how recently files and directories have been updated by
their owners or other users. Do not combine this flag with the \fB\-fast\fR
flag.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity \f(CWanonymous\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
the \fIvos(1)\fR manpage.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using a key from the local
\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\fB\-noauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
The output is ordered alphabetically by volume name and by default
provides the following information on a single line for each volume:
.Ip "\(bu" 4
Name
.Ip "\(bu" 4
Volume \s-1ID\s0 number
.Ip "\(bu" 4
Type (the flag is \f(CWRW\fR for read/write, \f(CWRO\fR for read-only, \f(CWBK\fR for
backup)
.Ip "\(bu" 4
Size in kilobytes (\f(CW1024\fR equals a megabyte)
.Ip "\(bu" 4
Number of files in the volume, if the \fB\-extended\fR flag is provided
.Ip "\(bu" 4
Status on the file server machine, which is one of the following:
.Ip "On-line" 8
The volume is completely accessible to Cache Managers.
.Ip "Off-line" 8
The volume is not accessible to Cache Managers, but does not seem to be
corrupted. This status appears while a volume is being dumped, for
example.
.Ip "Off-line**needs salvage**" 8
The volume is not accessible to Cache Managers, because it seems to be
corrupted. Use the \fBbos salvage\fR or \fBsalvager\fR command to repair the
corruption.
.PP
If the following message appears instead of the previously listed
information, it indicates that a volume is not accessible to Cache
Managers or the \fBvos\fR command interpreter, for example because a clone is
being created.
.PP
.Vb 1
\&   **** Volume <volume_ID> is busy ****
.Ve
If the following message appears instead of the previously listed
information, it indicates that the File Server is unable to attach the
volume, perhaps because it is seriously corrupted. The \fIFileLog\fR and
\fIVolserLog\fR log files in the \fI/usr/afs/logs\fR directory on the file
server machine possibly provide additional information; use the \fBbos
getlog\fR command to display them.
.PP
.Vb 1
\&   **** Could not attach volume <volume_ID> ****
.Ve
The information about individual volumes is bracketed by summary
lines. The first line of output specifies the number of volumes in the
listing. The last line of output summarizes the number of volumes that are
online, offline, and busy. These lines do not appear if the \fB\-quiet\fR flag
is used.
.PP
If the \fB\-fast\fR flag is added, the output displays only the volume \s-1ID\s0
number of each volume, arranged in increasing numerical order. The final
line (which summarizes the number of online, offline, and busy volumes) is
omitted.
.PP
If the \fB\-long\fR flag is included, the output for each volume includes all
of the information in the default listing plus the following. Each item in
this list corresponds to a separate line of output:
.Ip "\(bu" 4
The file server machine and partition that house the volume, as determined
by the command interpreter as the command runs, rather than derived from the
\s-1VLDB\s0 or the volume header.
.Ip "\(bu" 4
The volume \s-1ID\s0 numbers associated with the various versions of the volume:
read/write (\f(CWRWrite\fR), read-only (\f(CWROnly\fR), backup (\f(CWBackup\fR), and
ReleaseClone (\f(CWRClone\fR). One of them matches the volume \s-1ID\s0 number that
appears on the first line of the volume's output. If the value in the
\f(CWRWrite\fR, \f(CWROnly\fR, or \f(CWBackup\fR field is \f(CW0\fR (zero), there is no volume
of that type. If there is currently no ReleaseClone, the \f(CWRClone\fR field
does not appear at all.
.Ip "\(bu" 4
The maximum space quota allotted to the read/write copy of the volume,
expressed in kilobyte blocks in the \f(CWMaxQuota\fR field.
.Ip "\(bu" 4
The date and time the volume was created, in the \f(CWCreation\fR field. If the
volume has been restored with the \fBbackup diskrestore\fR, \fBbackup
volrestore\fR, or \fBvos restore\fR command, this is the restore time.
.Ip "\(bu" 4
The date and time when the contents of the volume last changed, in the
\f(CWLast Update\fR field. For read-only and backup volumes, it matches the
timestamp in the \f(CWCreation\fR field.
.Ip "\(bu" 4
The number of times the volume has been accessed for a fetch or store
operation since the later of the two following times:
.Ip "\(bu" 8
12:00 a.m. on the day the command is issued
.Ip "\(bu" 8
The last time the volume changed location
.PP
If the \fB\-extended\fR flag is included, the output for each volume includes
all of the information reported with the \fB\-long\fR flag, plus two tables of
statistics:
.Ip "\(bu" 4
The table labeled \f(CWRaw Read/Write Stats\fR table summarizes the number of
times the volume has been accessed for reading or writing.
.Ip "\(bu" 4
The table labeled \f(CWWrites Affecting Authorship\fR table contains
information on writes made to files and directories in the specified
volume.
.SH "EXAMPLES"
The following example shows the output for the \fI/vicepb\fR partition on the
file server machine \f(CWfs2.abc.com\fR when no flags are provided:
.PP
.Vb 9
\&   % vos listvol -server fs2.abc.com -partition b
\&   Total number of volumes on server fs2.abc.com partition /vicepb : 66
\&   sys                  1969534847 RW       1582 K On-line
\&   sys.backup           1969535105 BK       1582 K On-line
\&         .                   .     .         .   .    .
\&         .                   .     .         .   .    .
\&   user.pat             1969534536 RW      17518 K On-line
\&   user.pat.backup      1969534538 BK      17537 K On-line
\&   Total volumes onLine 66 ; Total volumes offLine 0 ;  Total busy 0
.Ve
The following example shows the output when the \fB\-fast\fR flag is added:
.PP
.Vb 7
\&   % vos listvol -server fs2.abc.com -partition b -fast
\&   Total number of volumes on server fs2.abc.com partition /vicepb : 66
\&    1969516782
\&    1969516784
\&        .
\&        .
\&    1969535796
.Ve
The following example shows two volumes from the output that appears when
the \fB\-long\fR flag is added:
.PP
.Vb 21
\&   % vos listvol -server fs2.abc.com -partition b -long
\&   Total number of volumes on server fs2.abc.com partition /vicepb: 66
\&         .                   .      .         .   .    .
\&         .                   .      .         .   .    .
\&   user.pat             1969534536 RW      17518 K On-line
\&        fs2.abc.com /vicepb
\&        RWrite 1969534536 ROnly 0        Backup 1969534538
\&        MaxQuota      20000 K
\&        Creation    Mon Jun 12 09:02:25 1989
\&        Last Update Thu May 20 17:39:34 1999
\&        1573 accesses in the past day (i.e., vnode references)
\&   user.pat.backup      1969534538 BK      17537 K On-line
\&        fs2.abc.com /vicepb
\&        RWrite 1969534536 ROnly 0        Backup 1969534538
\&        MaxQuota      20000 K
\&        Creation    Tue Jun 13 04:37:59 1989
\&        Last Update Wed May 19 06:37:59 1999
\&        0 accesses in the past day (i.e., vnode references)
\&          .                   .      .         .   .    .
\&          .                   .      .         .   .    .
\&   Total volumes onLine 66 ; Total volumes offLine 0 ; Total busy 0
.Ve
.SH "PRIVILEGE REQUIRED"
None
.SH "SEE ALSO"
the \fIbackup_diskrestore(8)\fR manpage,
the \fIbackup_volrestore(8)\fR manpage,
the \fIbos_getlog(8)\fR manpage,
the \fIbos_salvage(8)\fR manpage,
the \fIsalvager(8)\fR manpage,
the \fIvos(1)\fR manpage,
the \fIvos_examine(1)\fR manpage,
the \fIvos_listvldb(1)\fR manpage,
the \fIvos_restore(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS_LISTVOL 1"
.IX Name "vos listvol - Displays information from a volume header"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-server\fR <\fIserver name\fR>"

.IX Item "\fB\-partition\fR <\fIpartition name\fR>"

.IX Item "\fB\-fast\fR"

.IX Item "\fB\-long\fR"

.IX Item "\fB\-quiet\fR"

.IX Item "\fB\-extended\fR"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-verbose\fR"

.IX Item "\fB\-help\fR"

.IX Header "OUTPUT"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "On-line"

.IX Item "Off-line"

.IX Item "Off-line**needs salvage**"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

