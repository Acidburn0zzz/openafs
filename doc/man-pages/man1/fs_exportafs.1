.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH FS_EXPORTAFS 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
fs exportafs \- Configures export of AFS to clients of other file systems
.SH "SYNOPSIS"
\fBfs exportafs\fR <<\ \fB\-type\fR\ <\fIexporter\ name\fR >>>
    <<\ [\fB\-start\fR\ <\fIstart/stop\ translator\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-convert\fR\ <\fIconvert\ from\ afs\ to\ unix\ mode\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-uidcheck\fR\ <\fIrun\ on\ strict\ \*(L'uid\ check\*(R'\ mode\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-submounts\fR\ <\fIallow\ nfs\ mounts\ to\ subdirs\ of\ /afs/..\ (on\ |\ off)\fR] >>>
    [\fB\-help\fR]
.PP
\fBfs exp\fR <<\ \fB\-t\fR\ <\fIexporter\ name\fR >>>
    <<\ [\fB\-st\fR\ <\fIstart/stop\ translator\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-c\fR\ <\fIconvert\ from\ afs\ to\ unix\ mode\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-u\fR\ <\fIrun\ on\ strict\ \*(L'uid\ check\*(R'\ mode\ (on\ |\ off)\fR] >>>
    <<\ [\fB\-su\fR\ <\fIallow\ nfs\ mounts\ to\ subdirs\ of\ /afs/..\ (on\ |\ off)\fR] >>>
    [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBfs exportafs\fR command sets (if the \fB\-start\fR argument is provided)
or reports (if it is omitted) whether the machine can reexport the AFS
filespace to clients of a non-AFS file system. To control certain features
of the translation protocol, use the following arguments:
.Ip "\(bu" 4
To control whether the \s-1UNIX\s0 group and other mode bits on an \s-1AFS\s0 file or
directory are set to match the owner mode bits when it is exported to the
non-\s-1AFS\s0 file system, use the \fB\-convert\fR argument.
.Ip "\(bu" 4
To control whether tokens can be placed in a credential structure
identified by a \s-1UID\s0 that differs from the local \s-1UID\s0 of the entity that is
placing the tokens in the structure, use the \fB\-uidcheck\fR argument. The
most common use is to control whether issuers of the \fBknfs\fR command can
specify a value for its \fB\-id\fR argument that does not match their local
\s-1UID\s0 on the \s-1NFS/AFS\s0 translator machine.
.Ip "\(bu" 4
To control whether users can create mounts in the non-\s-1AFS\s0 filespace to an
\s-1AFS\s0 directory other than \fI/afs\fR, use the \fB\-submounts\fR argument.
.SH "OPTIONS"
.Ip "\fB\-type\fR <\fIexporter name\fR>" 4
Names the alternate file system to which to reexport the \s-1AFS\s0
filespace. The only acceptable value is \f(CWnfs\fR, in lowercase letters only.
.Ip "\fB\-start\fR on =item \fB\-start\fR off" 4
Enables the local machine to reexport the \s-1AFS\s0 filespace if the value is
\f(CWon\fR, or disables it if the value is \f(CWoff\fR. Omit this argument to report
the current setting for all of the configurable parameters.
.Ip "\fB\-convert\fR on =item \fB\-convert\fR off" 4
Controls the setting of the \s-1UNIX\s0 group and other mode bits on \s-1AFS\s0 files
and directories exported to the non-\s-1AFS\s0 file system. If the value is
\f(CWon\fR, they are set to match the \fBowner\fR mode bits. If the value is
\f(CWoff\fR, the bits are not changed. If this argument is omitted, the default
value is \f(CWon\fR.
.Ip "\fB\-uidcheck\fR on =item \fB\-uidcheck\fR off" 4
Controls whether tokens can be placed in a credential structure identified
by a \s-1UID\s0 that differs from the local \s-1UID\s0 of the entity that is placing the
tokens in the structure.
.Ip "\(bu" 8
If the value is on, the \s-1UID\s0 that identifies the credential structure must
match the local \s-1UID\s0.
.Sp
With respect to the \fBknfs\fR command, this value means that the value of
\fB\-id\fR argument must match the issuer's local \s-1UID\s0 on the translator
machine. In practice, this setting makes it pointless to include the
\fB\-id\fR argument to the \fBknfs\fR command, because the only acceptable value
(the issuer's local \s-1UID\s0) is already used when the \fB\-id\fR argument is
omitted.
.Sp
Enabling \s-1UID\s0 checking also makes it impossible to issue the \fBklog\fR and
\fBpagsh\fR commands on a client machine of the non-\s-1AFS\s0 file system even
though it is a system type supported by \s-1AFS\s0. For an explanation, see
the \fIklog(1)\fR manpage.
.Ip "\(bu" 8
If the value is off (the default), tokens can be assigned to a local \s-1UID\s0
in the non-\s-1AFS\s0 file system that does not match the local \s-1UID\s0 of the entity
assigning the tokens.
.Sp
With respect to the \fBknfs\fR command, it means that the issuer can use the
\fB\-id\fR argument to assign tokens to a local \s-1UID\s0 on the \s-1NFS\s0 client machine
that does not match his or her local \s-1UID\s0 on the translator machine. (An
example is assigning tokens to the \s-1MFS\s0 client machine's local superuser
\f(CWroot\fR.) This setting allows more than one issuer of the \fBknfs\fR command
to make tokens available to the same user on the \s-1NFS\s0 client machine. Each
time a different user issues the \fBknfs\fR command with the same value for
the \fB\-id\fR argument, that user's tokens overwrite the existing ones. This
can result in unpredictable access for the user on the \s-1NFS\s0 client machine.
.Ip "\fB\-submounts\fR on =item \fB\-submounts\fR off" 4
Controls whether a user of the non-\s-1AFS\s0 filesystem can mount any directory
in the \s-1AFS\s0 filespace other than the top-level \fI/afs\fR directory. If the
value is \f(CWon\fR, such submounts are allowed. If the value is \f(CWoff\fR, only
mounts of the \fI/afs\fR directory are allowed. If this argument is omitted,
the default value is \f(CWoff\fR.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
If the machine is not even configured as a server of the non-AFS file
system, the following message appears:
.PP
.Vb 2
\&   Sorry, the <file_system>-exporter type is currently not supported on
\&   this AFS client
.Ve
If the machine is configured as a server of the non-AFS file system but is
not currently enabled to reexport AFS to it (because the \fB\-start\fR
argument to this command is not set to \f(CWon\fR), the message is as follows:
.PP
.Vb 1
\&   '<file_system>' translator is disabled
.Ve
If the machine is enabled to reexport AFS, the following message precedes
messages that report the settings of the other parameters.
.PP
.Vb 1
\&   '<file_system>' translator is enabled with the following options:
.Ve
The following messages indicate that the \fB\-convert\fR argument is set to
\f(CWon\fR or \f(CWoff\fR respectively:
.PP
.Vb 2
\&   Running in convert owner mode bits to world/other mode
\&   Running in strict unix mode
.Ve
The following messages indicate that the \fB\-uidcheck\fR argument is set to
\f(CWon\fR or \f(CWoff\fR respectively:
.PP
.Vb 2
\&   Running in strict 'passwd sync' mode
\&   Running in no 'passwd sync' mode
.Ve
The following messages indicate that the \fB\-submounts\fR argument is set to
\f(CWon\fR or \f(CWoff\fR respectively:
.PP
.Vb 2
\&   Allow mounts of /afs/.. subdirs
\&   Only mounts to /afs allowed
.Ve
.SH "EXAMPLES"
The following example shows that the local machine can export AFS to NFS
client machines.
.PP
.Vb 5
\&   % fs exportafs nfs
\&   'nfs' translator is enabled with the following options:
\&        Running in convert owner mode bits to world/other mode
\&        Running in no 'passwd sync' mode
\&        Only mounts to /afs allowed
.Ve
The following example enables the machine as an NFS server and converts
the UNIX group and other mode bits on exported AFS directories and files
to match the UNIX owner mode bits.
.PP
.Vb 1
\&   % fs exportafs -type nfs -start on -convert on
.Ve
The following example disables the machine from reexporting AFS to NFS
client machines:
.PP
.Vb 1
\&   % fs exportafs -type nfs -start off
.Ve
.SH "PRIVILEGE REQUIRED"
The issuer must be logged in as the local superuser root.
.SH "SEE ALSO"
the \fIklog(1)\fR manpage,
the \fIknfs(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "FS_EXPORTAFS 1"
.IX Name "fs exportafs - Configures export of AFS to clients of other file systems"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-type\fR <\fIexporter name\fR>"

.IX Item "\fB\-start\fR on =item \fB\-start\fR off"

.IX Item "\fB\-convert\fR on =item \fB\-convert\fR off"

.IX Item "\fB\-uidcheck\fR on =item \fB\-uidcheck\fR off"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-submounts\fR on =item \fB\-submounts\fR off"

.IX Item "\fB\-help\fR"

.IX Header "OUTPUT"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

