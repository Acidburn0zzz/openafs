.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS_LISTVLDB 1 "OpenAFS" "1/Mar/2006" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos listvldb \- Displays a volume's VLDB entry
.SH "SYNOPSIS"
\fBvos listvldb\fR <<\ [\fB\-name\fR\ <\fIvolume\ name\ or\ ID\fR] >>>
    <<\ [\fB\-server\fR\ <\fImachine\ name\fR] >>> <<\ [\fB\-partition\fR\ <\fIpartition\ name\fR] >>>
    [\fB\-locked\fR] [\fB\-quiet\fR] [\fB\-nosort\fR] <<\ [\fB\-cell\fR\ <\fIcell\ name\fR] >>>
    [\fB\-noauth\fR] [\fB\-localauth\fR] [\fB\-verbose\fR] [\fB\-help\fR]
.PP
\fBvos listvl\fR <<\ [\fB\-na\fR\ <\fIvolume\ name\ or\ ID\fR] >>> <<\ [\fB\-s\fR\ <\fImachine\ name\fR] >>>
    <<\ [\fB\-p\fR\ <\fIpartition\ name\fR] >>> [\fB\-lock\fR] [\fB\-q\fR] [\fB\-nos\fR]
    <<\ [\fB\-c\fR\ <\fIcell\ name\fR] >>> [\fB\-noa\fR] [\fB\-loca\fR] [\fB\-v\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
The \fBvos listvldb\fR command formats and displays information from the
Volume Location Database (VLDB) entry for each volume specified.  The
output depends on the combination of options supplied on the command
line. Combine options as indicated to display the desired type of VLDB
entries:
.Ip "\(bu" 4
Every entry in the \s-1VLDB\s0: provide no options.
.Ip "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain file server machine as the site
for a volume: specify the machine's name as the \fB\-server\fR argument.
.Ip "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain partition on any file server
machine as the site for a volume: specify the partition name as the
\fB\-partition\fR argument.
.Ip "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain partition on a certain file
server machine as the site for a volume: combine the \fB\-server\fR and
\fB\-partition\fR arguments.
.Ip "\(bu" 4
A single \s-1VLDB\s0 entry: specify a volume name or \s-1ID\s0 number with the \fB\-name\fR
argument.
.Ip "\(bu" 4
The \s-1VLDB\s0 entry only for the volumes with locked \s-1VLDB\s0 entries found at a
certain site: combine the \fB\-locked\fR flag with any of arguments that
define sites.
.SH "OPTIONS"
.Ip "\fB\-name\fR <\fIvolume name or \s-1ID\s0\fR>" 4
Specifies either the complete name or volume \s-1ID\s0 number of a volume of any
of the three types.
.Ip "\fB\-server\fR <\fIserver name\fR>" 4
Identifies the file server machine listed as a site in each \s-1VLDB\s0 entry to
display. Provide the machine's \s-1IP\s0 address or its host name (either fully
qualified or using an unambiguous abbreviation). For details, see
the \fIvos(1)\fR manpage.
.Sp
This argument can be combined with the \fB\-partition\fR argument, the
\fB\-locked\fR flag, or both.
.Ip "\fB\-partition\fR <\fIpartition name\fR>" 4
Identifies the partition (on the file server machine specified by the
\fB\-server\fR argument) listed as a site in each \s-1VLDB\s0 entry to
display. Provide the partition's complete name with preceding slash (for
example, \f(CW/vicepa\fR) or use one of the three acceptable abbreviated
forms. For details, see the \fIvos(1)\fR manpage.
.Sp
This argument can be combined with the \fB\-server\fR argument, the \fB\-locked\fR
flag, or both.
.Ip "\fB\-locked\fR" 4
Displays only locked \s-1VLDB\s0 entries. This flag can be combined with the
\fB\-server\fR argument, the \fB\-partition\fR argument, or both.
.Ip "\fB\-quiet\fR" 4
Suppresses the lines that summarize the number of volumes listed and their
status, which otherwise appear at the beginning and end of the output when
the output includes more than one volume.
.Ip "\fB\-nosort\fR" 4
Suppresses the default sorting of volume entries alphabetically by volume
name.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-noauth\fR" 4
Assigns the unprivileged identity \f(CWanonymous\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
the \fIvos(1)\fR manpage.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using a key from the local
\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\fB\-noauth\fR flag. For more details, see the \fIvos(1)\fR manpage.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.Ip "\fB\-help\fR" 4
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
If the output includes more than one VLDB entry, by default the first line
reports which file server machine, partition, or both, houses the
volumes. The final line of output reports the total number of entries
displayed. Including the \fB\-quiet\fR flag suppresses these lines.
.PP
By default, volumes are sorted alphabetically by volume name.  Including
the \fB\-nosort\fR flag skips the sorting step, which can speed up the
production of output if there are a large number of entries.
.PP
The VLDB entry for each volume includes the following information:
.Ip "\(bu" 4
The base (read/write) volume name. The read-only and backup versions have
the same name with a \f(CW.readonly\fR and \f(CW.backup\fR extension, respectively.
.Ip "\(bu" 4
The volume \s-1ID\s0 numbers allocated to the versions of the volume that
actually exist, in fields labeled \f(CWRWrite\fR for the read/write, \f(CWROnly\fR
for the read-only, \f(CWBackup\fR for the backup, and \f(CWRClone\fR for the
ReleaseClone. (If a field does not appear, the corresponding version of
the volume does not exist.) The appearance of the \f(CWRClone\fR field normally
indicates that a release operation did not complete successfully; the
\f(CWOld release\fR and \f(CWNew release\fR flags often also appear on one or more
of the site definition lines described just following.
.Ip "\(bu" 4
The number of sites that house a read/write or read-only copy of the
volume, following the string \f(CW< number of sites -\fR >>.
.Ip "\(bu" 4
A line for each site that houses a read/write or read-only copy of the
volume, specifying the file server machine, partition, and type of volume
(\f(CWRW\fR for read/write or \f(CWRO\fR for read-only). If a backup version exists,
it is understood to share the read/write site.  Several flags can appear
with a site definition:
.Ip "Not released" 8
Indicates that the vos release command has not been issued since the \fBvos
addsite\fR command was used to define the read-only site.
.Ip "Old release" 8
Indicates that a vos release command did not complete successfully,
leaving the previous, obsolete version of the volume at this site.
.Ip "New release" 8
Indicates that a vos release command did not complete successfully, but
that this site did receive the correct new version of the volume.
.Ip "\(bu" 4
If the \s-1VLDB\s0 entry is locked, the string \f(CWVolume is currently LOCKED\fR.
.PP
For further discussion of the \f(CWNew release\fR and \f(CWOld release\fR flags, see
the \fIvos_release(1)\fR manpage.
.SH "EXAMPLES"
The following command displays VLDB information for the ABC Corporation
volume called \f(CWusr\fR, which has two read-only replication sites:
.PP
.Vb 7
\&   % vos listvldb -name usr
\&   usr
\&    RWrite: 5360870981   ROnly: 536870982   Backup: 536870983
\&    number of sites -> 3
\&       server fs1.abc.com partition /vicepa RO Site
\&       server fs3.abc.com partition /vicepa RO Site
\&       server fs2.abc.com partition /vicepb RW Site
.Ve
The following example shows entries for two of the volumes that reside on
the file server machine \f(CWfs4.abc.com\fR. The first VLDB entry is currently
locked. There are 508 entries that mention the machine as a volume site.
.PP
.Vb 16
\&   % vos listvldb -server fs4.abc.com
\&   VLDB entries for server fs4.abc.com
\&       .       .           .        .
\&       .       .           .        .
\&   user.smith
\&    RWrite: 278541326   ROnly: 278541327   Backup: 278542328
\&    number of sites -> 1
\&      server fs4.abc.com partition /vicepg RW Site
\&    Volume is currently LOCKED
\&      user.terry
\&    RWrite 354287190   ROnly 354287191   Backup 354287192
\&    number of sites -> 1
\&      server fs4.abc.com partition /vicepc RW Site
\&      .       .           .        .
\&      .       .           .        .
\&   Total entries: 508
.Ve
.SH "PRIVILEGE REQUIRED"
None
.SH "SEE ALSO"
the \fIvos(1)\fR manpage,
the \fIvos_examine(1)\fR manpage,
the \fIvos_listvol(1)\fR manpage,
the \fIvos_lock(1)\fR manpage,
the \fIvos_unlock(1)\fR manpage,
the \fIvos_unlockvldb(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS_LISTVLDB 1"
.IX Name "vos listvldb - Displays a volume's VLDB entry"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "OPTIONS"

.IX Item "\fB\-name\fR <\fIvolume name or \s-1ID\s0\fR>"

.IX Item "\fB\-server\fR <\fIserver name\fR>"

.IX Item "\fB\-partition\fR <\fIpartition name\fR>"

.IX Item "\fB\-locked\fR"

.IX Item "\fB\-quiet\fR"

.IX Item "\fB\-nosort\fR"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-verbose\fR"

.IX Item "\fB\-help\fR"

.IX Header "OUTPUT"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "Not released"

.IX Item "Old release"

.IX Item "New release"

.IX Item "\(bu"

.IX Header "EXAMPLES"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

