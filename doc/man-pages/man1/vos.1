.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH VOS 1 "OpenAFS" "19/Jan/2008" "AFS Command Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
vos \- Introduction to the vos command suite
.SH "DESCRIPTION"
The commands in the \fBvos\fR command suite are the administrative interface
to the Volume Server and Volume Location (VL) Server. System
administrators use \fBvos\fR commands to create, move, delete, replicate,
back up and examine volumes, among other operations. The VL Server
automatically records in the Volume Location Database (VLDB) changes in
volume status and location that result from \fBvos\fR commands.
.PP
The operations invoked by most \fBvos\fR commands are idempotent, meaning
that if an operation is interrupted by a network, server machine, or
process outage, then a subsequent attempt at the same operation continues
from the interruption point, rather than starting over at the beginning of
the operation. Before executing a command, the Volume and VL Servers check
the current state of the volumes and VLDB records to be altered by the
command. If they are already in the desired end state (or a consistent
intermediate state), there is no need to repeat the internal steps that
brought them there. Idempotency does not apply if the command issuer
explicitly interrupts the operation with the Ctrl-C command or another
interrupt signal. In that case, the volume is left locked and the
administrator must use the \fBvos unlock\fR command to unlock it before
proceeding.
.PP
It is important that the VLDB accurately indicate the status of the
volumes on file server machines at all times. the \fIvldb.DB0(5)\fR manpage and
the \fIafs_volume_header(5)\fR manpage describe the information recorded in the VLDB and
volume headers, respectively. If a \fBvos\fR command changes volume status,
it automatically records the change in the corresponding VLDB entry. The
most common cause of discrepancies between the VLDB and volume status on
file server machines is interrupted operations; to restore consistency,
use the \fBvos syncserv\fR and \fBvos syncvldb\fR commands.
.PP
There are several categories of commands in the vos command suite:
.Ip "\(bu" 4
Commands to create, move, and rename volumes: \fBvos backup\fR, \fBvos
backupsys\fR, \fBvos changeloc\fR, \fBvos create\fR, \fBvos move\fR, and \fBvos
rename\fR.
.Ip "\(bu" 4
Commands to remove \s-1VLDB\s0 volume records or volumes or both: \fBvos
delentry\fR, \fBvos remove\fR, and \fBvos zap\fR.
.Ip "\(bu" 4
Commands to edit or display \s-1VLDB\s0 server entries: \fBvos changeaddr\fR and
\fBvos listaddrs\fR.
.Ip "\(bu" 4
Commands to create, size, and restore dump files: \fBvos dump\fR, \fBvos
restore\fR, and \fBvos size\fR.
.Ip "\(bu" 4
Commands to administer replicated volumes: \fBvos addsite\fR, \fBvos release\fR,
and \fBvos remsite\fR.
.Ip "\(bu" 4
Commands to display \s-1VLDB\s0 records, volume headers, or both: \fBvos examine\fR,
\fBvos listvldb\fR, and \fBvos listvol\fR.
.Ip "\(bu" 4
Commands to display information about partitions that house volumes: \fBvos
listpart\fR and \fBvos partinfo\fR.
.Ip "\(bu" 4
Commands to restore consistency between the \s-1VLDB\s0 and volume headers: \fBvos
syncserv\fR and \fBvos syncvldb\fR.
.Ip "\(bu" 4
Commands to lock and unlock \s-1VLDB\s0 entries: \fBvos lock\fR, \fBvos unlock\fR, and
\fBvos unlockvldb\fR.
.Ip "\(bu" 4
A command to report Volume Server status: \fBvos status\fR.
.Ip "\(bu" 4
Commands to obtain help: \fBvos apropos\fR and \fBvos help\fR.
.SH "CAUTIONS"
Currently, the maximum size of a volume is 2 terabytes (2^31 bytes)
and the maximum size of a /vicepX partition on a fileserver is also 2
terabytes. The fileserver will not report an error when it has access
to a partition larger than 2 terabytes, but it will probably fail if
the administrator attempts to use more than 2 terabytes of space. In
addition, there are reports of erroneous disk usage numbers when
\fBvos partinfo\fR or other OpenAFS disk reporting tools are used with
partitions larger than 2 terabytes.
.SH "OPTIONS"
The following arguments and flags are available on many commands in the
\fBbos\fR suite. The reference page for each command also lists them, but
they are described here in greater detail.
.Ip "\fB\-cell\fR <\fIcell name\fR>" 4
Names the cell in which to run the command. It is acceptable to abbreviate
the cell name to the shortest form that distinguishes it from the other
entries in the \fI/usr/vice/etc/CellServDB\fR file on the local machine. If
the \fB\-cell\fR argument is omitted, the command interpreter determines the
name of the local cell by reading the following in order:
.Ip "\(bu" 8
The value of the \s-1AFSCELL\s0 environment variable.
.Ip "\(bu" 8
The local \fI/usr/vice/etc/ThisCell\fR file.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell.
.Ip "\fB\-help\fR" 4
Prints a command's online help message on the standard output stream. Do
not combine this flag with any of the command's other options; when it is
provided, the command interpreter ignores all other options, and only
prints the help message.
.Ip "\fB\-localauth\fR" 4
Constructs a server ticket using the server encryption key with the
highest key version number in the local \fI/usr/afs/etc/KeyFile\fR file. The
\fBvos\fR command interpreter presents the ticket, which never expires, to
the Volume Server and \s-1VL\s0 Server during mutual authentication.
.Sp
Use this flag only when issuing a command on a server machine; client
machines do not usually have a \fI/usr/afs/etc/KeyFile\fR file.  The issuer
of a command that includes this flag must be logged on to the server
machine as the local superuser \f(CWroot\fR. The flag is useful for commands
invoked by an unattended application program, such as a process controlled
by the \s-1UNIX\s0 \fBcron\fR utility or by a cron entry in the machine's
\fI/usr/afs/local/BosConfig\fR file. It is also useful if an administrator is
unable to authenticate to \s-1AFS\s0 but is logged in as the local superuser
\fBroot\fR.
.Sp
Do not combine the \fB\-cell\fR and \fB\-localauth\fR options. A command on which
the \fB\-localauth\fR flag is included always runs in the local cell (as
defined in the server machine's local \fI/usr/afs/etc/ThisCell\fR file),
whereas a command on which the \fB\-cell\fR argument is included runs in the
specified foreign cell. Also, do not combine the \fB\-localauth\fR and
\fB\-noauth\fR flags.
.Ip "\fB\-noauth\fR" 4
Establishes an unauthenticated connection to the Volume Server and \s-1VL\s0
Server, in which the servers treat the issuer as the unprivileged user
\f(CWanonymous\fR. It is useful only when authorization checking is disabled on
the server machine (during the installation of a file server machine or
when the \fBbos setauth\fR command has been used during other unusual
circumstances). In normal circumstances, the servers allow only privileged
users to issue commands that change the status of a volume or \s-1VLDB\s0 record,
and refuses to perform such an action even if the \fB\-noauth\fR flag is
provided. Do not combine the \fB\-noauth\fR and \fB\-localauth\fR flags.
.Ip "\fB\-partition\fR <\fIpartition name\fR>" 4
Identifies the \s-1AFS\s0 server partition on a file server machine that houses,
or is to house, the volumes of interest, or about which to list
information. The \fBvos\fR command interpreter accepts any of the following
four name formats:
.Sp
.Vb 2
\&   /vicepa     =     vicepa      =      a      =      0
\&   /vicepb     =     vicepb      =      b      =      1
.Ve
After /vicepz (for which the index is 25) comes
.Sp
.Vb 2
\&   /vicepaa    =     vicepaa     =      aa     =      26
\&   /vicepab    =     vicepab     =      ab     =      27
.Ve
and so on through
.Sp
.Vb 1
\&   /vicepiv    =     vicepiv     =      iv     =      255
.Ve
The \fB\-frompartition\fR and \fB\-topartition\fR arguments to the \fBvos move\fR
command also accept this notation.
.Ip "\fB\-server\fR <\fImachine name\fR>" 4
Identifies the file server machine that houses, or is to house, the
volumes or \s-1AFS\s0 server partitions of interest. Provide the machine's \s-1IP\s0
address in dotted decimal format, its fully qualified host name (for
example, \f(CWfs1.abc.com\fR), or the shortest abbreviated form of its host
name that distinguishes it from other machines. Successful use of an
abbreviated form depends on the availability of a name resolution service
(such as the Domain Name Service or a local host table) at the time the
command is issued.
.Sp
The \fB\-fromserver\fR and \fB\-toserver\fR arguments to the \fBvos move\fR command
also accept these name formats.
.Ip "\fB\-verbose\fR" 4
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.SH "PRIVILEGE REQUIRED"
To issue most vos commands, the issuer must be listed in the
\fI/usr/afs/etc/UserList\fR file on each server machine that houses or is to
house an affected volume, and on each database server machine. The most
predictable performance results if all database server and file server
machines in the cell share a common \fIUserList\fR file.  Alternatively, if
the \fB\-localauth\fR flag is included, the issuer must be logged on to a
server machine as the local superuser \f(CWroot\fR.
.PP
To issue a vos command that only displays information, no privilege is
required.
.SH "SEE ALSO"
the \fICellServDB(5)\fR manpage,
the \fIUserList(5)\fR manpage,
the \fIvos_addsite(1)\fR manpage,
the \fIvos_apropos(1)\fR manpage,
the \fIvos_backup(1)\fR manpage,
the \fIvos_backupsys(1)\fR manpage,
the \fIvos_changeaddr(1)\fR manpage,
the \fIvos_convertROtoRW(1)\fR manpage,
the \fIvos_copy(1)\fR manpage,
the \fIvos_create(1)\fR manpage,
the \fIvos_delentry(1)\fR manpage,
the \fIvos_dump(1)\fR manpage,
the \fIvos_examine(1)\fR manpage,
the \fIvos_help(1)\fR manpage,
the \fIvos_listaddrs(1)\fR manpage,
the \fIvos_listpart(1)\fR manpage,
the \fIvos_listvldb(1)\fR manpage,
the \fIvos_listvol(1)\fR manpage,
the \fIvos_lock(1)\fR manpage,
the \fIvos_move(1)\fR manpage,
the \fIvos_partinfo(1)\fR manpage,
the \fIvos_release(1)\fR manpage,
the \fIvos_remove(1)\fR manpage,
the \fIvos_remsite(1)\fR manpage,
the \fIvos_rename(1)\fR manpage,
the \fIvos_restore(1)\fR manpage,
the \fIvos_size(1)\fR manpage,
the \fIvos_status(1)\fR manpage,
the \fIvos_syncserv(1)\fR manpage,
the \fIvos_syncvldb(1)\fR manpage,
the \fIvos_unlock(1)\fR manpage,
the \fIvos_unlockvldb(1)\fR manpage,
the \fIvos_zap(1)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "VOS 1"
.IX Name "vos - Introduction to the vos command suite"

.IX Header "NAME"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "CAUTIONS"

.IX Header "OPTIONS"

.IX Item "\fB\-cell\fR <\fIcell name\fR>"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\fB\-help\fR"

.IX Item "\fB\-localauth\fR"

.IX Item "\fB\-noauth\fR"

.IX Item "\fB\-partition\fR <\fIpartition name\fR>"

.IX Item "\fB\-server\fR <\fImachine name\fR>"

.IX Item "\fB\-verbose\fR"

.IX Header "PRIVILEGE REQUIRED"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

