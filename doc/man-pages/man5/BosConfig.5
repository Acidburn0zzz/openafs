.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH BosConfig 5 "OpenAFS" "5/Jan/2006" "AFS File Reference"
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
BosConfig \- Defines server processes for the BOS Server to monitor
.SH "DESCRIPTION"
The \fIBosConfig\fR file lists the processes that the Basic OverSeer (BOS)
Server monitors on its server machine, and thus defines which AFS server
processes run on the machine. It specifies how the BOS Server reacts when
a process fails, and also defines the times at which the BOS Server
automatically restarts processes as part of performance maintenance.  The
file must reside in the \fI/usr/afs/local\fR directory on each AFS server
machine.
.PP
A server process entry in the \fIBosConfig\fR file records the following
information:
.Ip "\(bu" 4
The \fIentry type\fR, which is one of the following:
.Ip "cron" 8
Designates a server process that runs periodically instead of
continuously. The \s-1BOS\s0 Server starts a cron process only at specified
times, not whenever it fails. All standard \s-1AFS\s0 process entries except
\f(CWfs\fR are simple (there are no standard cron processes).
.Ip "fs" 8
Designates a group of interdependent server processes. If one of the
processes fails, the \s-1BOS\s0 Server must coordinate its restart with the
restart of the other processes in the group, possibly by stopping them
first.
.Sp
There is only one standard entry of this type, for which the conventional
name is \f(CWfs\fR. It combines three server processes: the File Server
(\fBfileserver\fR process), the Volume Server (\fBvolserver\fR process), and the
Salvager (\fBsalvager\fR process). These processes all operate on the same
data\*(--the \s-1AFS\s0 data stored on an \s-1AFS\s0 server machine's \fI/vicep\fR partitions
and mounted in the \s-1AFS\s0 filespace\*(--but in different ways. Grouping the
processes prevents them from attempting to access the same data
simultaneously, which can cause corruption.
.Sp
During normal operation, the Salvager process is not active. If the File
Server process fails, however, the \s-1BOS\s0 Server stops the Volume Server
process and runs the Salvager process to correct any corruption that
resulted from the failure. (The administrator can also issue the \fBbos
salvage\fR command to invoke the Salvager process.) If the Volume Server
fails, the \s-1BOS\s0 Server can restart it without stopping the File Server or
running the Salvager.
.Ip "simple" 8
Designates a server process that runs independently of any other on the
server machine. If a simple process fails, the \s-1BOS\s0 Server does not have to
coordinate its restart with any other process.
.Ip "\(bu" 4
The \fIentry name\fR. The conventional name for an entry in the \fIBosConfig\fR
file and the associated process matches the binary filename. When issuing
any \fBbos\fR command that takes the \fB\-instance\fR argument, identify each
process by the name used in the \fIBosConfig\fR file. For a list of the
names, see the \fBbos create\fR reference page.
.Ip "\(bu" 4
The process's \fIstatus flag\fR, which determines whether the \s-1BOS\s0 Server
attempts to start the process in two cases: each time the \s-1BOS\s0 Server
itself restarts, and when the process fails. The \fIBosConfig\fR file
currently uses a binary notation to indicate whether the \s-1BOS\s0 Server
attempts to restart the process as necessary or does not monitor it at
all. For the sake of clarity, the \s-1AFS\s0 documentation refers to the flags as
\f(CWRun\fR and \f(CWNotRun\fR instead.  Only a system administrator, not the \s-1BOS\s0
Server, can change the flag.
.Ip "\(bu" 4
One or more \fIcommand parameters\fR which the \s-1BOS\s0 Server invokes to start
the process or processes associated with the entry:
.Ip "\(bu" 8
A \f(CWcron\fR entry has two command parameters, the first the complete
pathname to the program, and the second the time at which the \s-1BOS\s0 Server
invokes the program.
.Ip "\(bu" 8
The \f(CWfs\fR entry has three command parameters, each the complete pathname
to the \fBfileserver\fR, \fBvolserver\fR, and \fBsalvager\fR programs, in that
order.
.Ip "\(bu" 8
A \f(CWsimple\fR entry has only one command parameter, the complete pathname to
the program.
.PP
In addition to server process entries, the \fIBosConfig\fR file specifies the
times at which the \s-1BOS\s0 Server performs two types of automatic process
restarts:
.Ip "\(bu" 4
The \fIgeneral restart\fR time at which the \s-1BOS\s0 Server restarts itself and
then each process for which the entry in the \fIBosConfig\fR file has status
flag \f(CWRun\fR. The default setting is Sunday at 4:00 a.m.
.Ip "\(bu" 4
The \fIbinary restart\fR time at which the \s-1BOS\s0 Server restarts any server
process for which the time stamp on the binary file in the \fI/usr/afs/bin\fR
directory is later than the last restart time for the process. The default
is 5:00 a.m.
.PP
Although the \fIBosConfig\fR file is in \s-1ASCII\s0 format, do not use a text
editor to alter it. Its format is subject to change and incorrectly
formatted entries can prevent server startup in ways that are difficult to
diagnose. Instead always use the appropriate commands from the \fBbos\fR
command suite:
.Ip "\(bu" 4
The \fBbos create\fR command to create an entry in the file and start the
associated process.
.Ip "\(bu" 4
The \fBbos delete\fR command to remove an entry from the file after the \fBbos
stop\fR command is used to stop the associated process.
.Ip "\(bu" 4
The \fBbos getrestart\fR command to display the times at which the \s-1BOS\s0 Server
performs automatic restarts.
.Ip "\(bu" 4
The \fBbos setrestart\fR command to set the times at which the \s-1BOS\s0 Server
performs automatic process restarts.
.Ip "\(bu" 4
The \fBbos start\fR command to change an entry's status flag to \f(CWRun\fR and
start the associated process.
.Ip "\(bu" 4
The \fBbos status\fR command to display all processes listed in the file.
.Ip "\(bu" 4
The \fBbos stop\fR command to change an entry's status flag to \f(CWNotRun\fR and
stop the associated process.
.PP
There are also bos commands that start and stop processes without changing
entries in the \fIBosConfig\fR file. The \s-1BOS\s0 Server reads the \fIBosConfig\fR
file only when it starts, transferring the information into its
memory. Thus a process's status as represented in the \s-1BOS\s0 Server's memory
can diverge from its status in the \fIBosConfig\fR file. The following
commands change a process's status in the \s-1BOS\s0 Server's memory only:
.Ip "\(bu" 4
The \fBbos restart\fR command restarts a specified set of processes, all
processes, or all processes other than the \s-1BOS\s0 Server.
.Ip "\(bu" 4
The \fBbos shutdown\fR command stops a process.
.Ip "\(bu" 4
The \fBbos startup\fR command starts a process.
.SH "SEE ALSO"
the \fIbos_create(8)\fR manpage,
the \fIbos_delete(8)\fR manpage,
the \fIbos_getrestart(8)\fR manpage,
the \fIbos_restart(8)\fR manpage,
the \fIbos_setrestart(8)\fR manpage,
the \fIbos_shutdown(8)\fR manpage,
the \fIbos_start(8)\fR manpage,
the \fIbos_startup(8)\fR manpage,
the \fIbos_status(8)\fR manpage,
the \fIbos_stop(8)\fR manpage,
the \fIbos_salvage(8)\fR manpage,
the \fIfileserver(8)\fR manpage,
the \fIsalvager(8)\fR manpage,
the \fIvolserver(8)\fR manpage
.SH "COPYRIGHT"
IBM Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the IBM Public License Version 1.0.  It was
converted from HTML to POD by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.

.rn }` ''
.IX Title "BosConfig 5"
.IX Name "BosConfig - Defines server processes for the BOS Server to monitor"

.IX Header "NAME"

.IX Header "DESCRIPTION"

.IX Item "\(bu"

.IX Item "cron"

.IX Item "fs"

.IX Item "simple"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Item "\(bu"

.IX Header "SEE ALSO"

.IX Header "COPYRIGHT"

